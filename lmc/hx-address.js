!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue"),require("element-ui"),require("vant"),require("axios")):"function"==typeof define&&define.amd?define(["exports","vue","element-ui","vant","axios"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).hxAddress={},e.Vue,e.ElementUI,e.Vant,e.axios)}(this,(function(e,t,n,r,a){function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),s=new O(r||[]);return a(o,"_invoke",{value:D(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var p="suspendedStart",f="suspendedYield",g="executing",m="completed",y={};function v(){}function b(){}function C(){}var A={};c(A,o,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w($([])));S&&S!==n&&r.call(S,o)&&(A=S);var x=C.prototype=v.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(a,i,o,s){var l=h(e[a],e,i);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function D(t,n,r){var a=p;return function(i,o){if(a===g)throw new Error("Generator is already running");if(a===m){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===p)throw a=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=g;var u=h(t,n,r);if("normal"===u.type){if(a=r.done?m:f,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=m,r.method="throw",r.arg=u.arg)}}}function M(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=C,a(x,"constructor",{value:C,configurable:!0}),a(C,"constructor",{value:b,configurable:!0}),b.displayName=c(C,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,C):(e.__proto__=C,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},k(L.prototype),c(L.prototype,l,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new L(d(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(x),c(x,u,"Generator"),c(x,o,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=$,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return s.type="throw",s.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:$(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function l(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,a)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){c(i,r,a,o,s,"next",e)}function s(e){c(i,r,a,o,s,"throw",e)}o(void 0)}))}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}
/*! js-cookie v3.0.5 | MIT */function C(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var A={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};var w=function e(t,n){function r(e,r,a){if("undefined"!=typeof document){"number"==typeof(a=C({},n,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var o in a)a[o]&&(i+="; "+o,!0!==a[o]&&(i+="="+a[o].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},a=0;a<n.length;a++){var i=n[a].split("="),o=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=t.read(o,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",C({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,C({},this.attributes,t))},withConverter:function(t){return e(C({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}(A,{path:"/"}),S="hx",x=S.charAt(0).toUpperCase()+S.slice(1);function k(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"/vue-openapi":"";if("local"===function(){var e=new RegExp(".*(?="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hxjf")+")"),t=window.location.hostname.match(e);return t?t[0]?t[0].replace("-",""):"pro":"local"}()){var n,r={},a=b(new URLSearchParams(location.search.slice(1)));try{for(a.s();!(n=a.n()).done;){var i=g(n.value,2),o=i[0],s=i[1];r[o]=s}}catch(e){a.e(e)}finally{a.f()}var l=r.devProxy;if(l)return"".concat(l).concat(t);var u=w.get("devProxy");if(u)return"".concat(u).concat(t)}return e?"/vue-openapi":"/vue-api"}function L(){if("undefined"==typeof window)return!1;var e,t=(e={},[{key:"hash",content:window.location.hash.split("?")[1],params:{}},{key:"search",content:window.location.search.substr(1),params:{}}].forEach((function(t){t.params={},t.content?(t.content.split(/&/g).forEach((function(e){t.params[(e=e.split("="))[0]]=e[1]})),e[t.key]=t.params):e[t.key]={}})),e),n=t.hash,r=t.search.addressBrowser||n.addressBrowser;return r?"phone"===r:!!/Android|webOS|iPhone|iPod|BlackBerry|HXApp/i.test(navigator.userAgent)}function D(e){return"CN"===e}function M(e){return["TW","HK","MO"].indexOf(e)>-1}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.regionCode,n=e.regionName;return["DIST22000554","DIST22000572","DIST22000542","DIST22002623"].indexOf(t)>-1||["北京市","天津市","上海市","重庆市"].indexOf(n)>-1}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function P(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},O.apply(this,arguments)}var $=["attrs","props","domProps"],I=["class","style","directives"],E=["on","nativeOn"],R=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}},N=P((function(e){return e.reduce((function(e,t){for(var n in t)if(e[n])if(-1!==$.indexOf(n))e[n]=O({},e[n],t[n]);else if(-1!==I.indexOf(n)){var r=e[n]instanceof Array?e[n]:[e[n]],a=t[n]instanceof Array?t[n]:[t[n]];e[n]=[].concat(r,a)}else if(-1!==E.indexOf(n))for(var i in t[n])if(e[n][i]){var o=e[n][i]instanceof Array?e[n][i]:[e[n][i]],s=t[n][i]instanceof Array?t[n][i]:[t[n][i]];e[n][i]=[].concat(o,s)}else e[n][i]=t[n][i];else if("hook"===n)for(var l in t[n])e[n][l]=e[n][l]?R(e[n][l],t[n][l]):t[n][l];else e[n]=t[n];else e[n]=t[n];return e}),{})}));function B(e,t){return t?"string"==typeof t?" ".concat(e,"--").concat(t):Array.isArray(t)?t.reduce((function(t,n){return t+B(e,n)}),""):Object.keys(t).reduce((function(n,r){return n+(t[r]?B(e,r):"")}),""):""}function K(e){return function(t,n){t&&"string"!=typeof t&&(n=t,t="");var r=t?"".concat(S,"-").concat(e,"__").concat(t):"".concat(S,"-").concat(e);return"".concat(r).concat(B(r,n))}}var j={exports:{}};
/*!
   * vue-virtual-scroll-list v2.3.4
   * open source under the MIT license
   * https://github.com/tangbc/vue-virtual-scroll-list#readme
   */!function(e,n){e.exports=function(e){function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return l(e)||u(e)||c(e)||h()}function l(e){if(Array.isArray(e))return d(e)}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var p={FRONT:"FRONT",BEHIND:"BEHIND"},f={INIT:"INIT",FIXED:"FIXED",DYNAMIC:"DYNAMIC"},g=0,m=function(){function e(t,n){r(this,e),this.init(t,n)}return i(e,[{key:"init",value:function(e,t){this.param=e,this.callUpdate=t,this.sizes=new Map,this.firstRangeTotalSize=0,this.firstRangeAverageSize=0,this.fixedSizeValue=0,this.calcType=f.INIT,this.offset=0,this.direction="",this.range=Object.create(null),e&&this.checkRange(0,e.keeps-1)}},{key:"destroy",value:function(){this.init(null,null)}},{key:"getRange",value:function(){var e=Object.create(null);return e.start=this.range.start,e.end=this.range.end,e.padFront=this.range.padFront,e.padBehind=this.range.padBehind,e}},{key:"isBehind",value:function(){return this.direction===p.BEHIND}},{key:"isFront",value:function(){return this.direction===p.FRONT}},{key:"getOffset",value:function(e){return(e<1?0:this.getIndexOffset(e))+this.param.slotHeaderSize}},{key:"updateParam",value:function(e,t){var n=this;this.param&&e in this.param&&("uniqueIds"===e&&this.sizes.forEach((function(e,r){t.includes(r)||n.sizes.delete(r)})),this.param[e]=t)}},{key:"saveSize",value:function(e,t){this.sizes.set(e,t),this.calcType===f.INIT?(this.fixedSizeValue=t,this.calcType=f.FIXED):this.calcType===f.FIXED&&this.fixedSizeValue!==t&&(this.calcType=f.DYNAMIC,delete this.fixedSizeValue),this.calcType!==f.FIXED&&void 0!==this.firstRangeTotalSize&&(this.sizes.size<Math.min(this.param.keeps,this.param.uniqueIds.length)?(this.firstRangeTotalSize=s(this.sizes.values()).reduce((function(e,t){return e+t}),0),this.firstRangeAverageSize=Math.round(this.firstRangeTotalSize/this.sizes.size)):delete this.firstRangeTotalSize)}},{key:"handleDataSourcesChange",value:function(){var e=this.range.start;this.isFront()?e-=g:this.isBehind()&&(e+=g),e=Math.max(e,0),this.updateRange(this.range.start,this.getEndByStart(e))}},{key:"handleSlotSizeChange",value:function(){this.handleDataSourcesChange()}},{key:"handleScroll",value:function(e){this.direction=e<this.offset||0===e?p.FRONT:p.BEHIND,this.offset=e,this.param&&(this.direction===p.FRONT?this.handleFront():this.direction===p.BEHIND&&this.handleBehind())}},{key:"handleFront",value:function(){var e=this.getScrollOvers();if(!(e>this.range.start)){var t=Math.max(e-this.param.buffer,0);this.checkRange(t,this.getEndByStart(t))}}},{key:"handleBehind",value:function(){var e=this.getScrollOvers();e<this.range.start+this.param.buffer||this.checkRange(e,this.getEndByStart(e))}},{key:"getScrollOvers",value:function(){var e=this.offset-this.param.slotHeaderSize;if(e<=0)return 0;if(this.isFixedType())return Math.floor(e/this.fixedSizeValue);for(var t=0,n=0,r=0,a=this.param.uniqueIds.length;t<=a;){if(n=t+Math.floor((a-t)/2),(r=this.getIndexOffset(n))===e)return n;r<e?t=n+1:r>e&&(a=n-1)}return t>0?--t:0}},{key:"getIndexOffset",value:function(e){if(!e)return 0;for(var t=0,n=0,r=0;r<e;r++)t+="number"==typeof(n=this.sizes.get(this.param.uniqueIds[r]))?n:this.getEstimateSize();return t}},{key:"isFixedType",value:function(){return this.calcType===f.FIXED}},{key:"getLastIndex",value:function(){return this.param.uniqueIds.length-1}},{key:"checkRange",value:function(e,t){var n=this.param.keeps;this.param.uniqueIds.length<=n?(e=0,t=this.getLastIndex()):t-e<n-1&&(e=t-n+1),this.range.start!==e&&this.updateRange(e,t)}},{key:"updateRange",value:function(e,t){this.range.start=e,this.range.end=t,this.range.padFront=this.getPadFront(),this.range.padBehind=this.getPadBehind(),this.callUpdate(this.getRange())}},{key:"getEndByStart",value:function(e){var t=e+this.param.keeps-1;return Math.min(t,this.getLastIndex())}},{key:"getPadFront",value:function(){return this.isFixedType()?this.fixedSizeValue*this.range.start:this.getIndexOffset(this.range.start)}},{key:"getPadBehind",value:function(){var e=this.range.end,t=this.getLastIndex();return this.isFixedType()?(t-e)*this.fixedSizeValue:(t-e)*this.getEstimateSize()}},{key:"getEstimateSize",value:function(){return this.isFixedType()?this.fixedSizeValue:this.firstRangeAverageSize||this.param.estimateSize}}]),e}(),y={dataKey:{type:[String,Function],required:!0},dataSources:{type:Array,required:!0},dataComponent:{type:[Object,Function],required:!0},keeps:{type:Number,default:30},extraProps:{type:Object},estimateSize:{type:Number,default:50},direction:{type:String,default:"vertical"},start:{type:Number,default:0},offset:{type:Number,default:0},topThreshold:{type:Number,default:0},bottomThreshold:{type:Number,default:0},pageMode:{type:Boolean,default:!1},rootTag:{type:String,default:"div"},wrapTag:{type:String,default:"div"},wrapClass:{type:String,default:""},wrapStyle:{type:Object},itemTag:{type:String,default:"div"},itemClass:{type:String,default:""},itemClassAdd:{type:Function},itemStyle:{type:Object},headerTag:{type:String,default:"div"},headerClass:{type:String,default:""},headerStyle:{type:Object},footerTag:{type:String,default:"div"},footerClass:{type:String,default:""},footerStyle:{type:Object},itemScopedSlots:{type:Object}},v={index:{type:Number},event:{type:String},tag:{type:String},horizontal:{type:Boolean},source:{type:Object},component:{type:[Object,Function]},slotComponent:{type:Function},uniqueKey:{type:[String,Number]},extraProps:{type:Object},scopedSlots:{type:Object}},b={event:{type:String},uniqueKey:{type:String},tag:{type:String},horizontal:{type:Boolean}},C={created:function(){this.shapeKey=this.horizontal?"offsetWidth":"offsetHeight"},mounted:function(){var e=this;"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver((function(){e.dispatchSizeChange()})),this.resizeObserver.observe(this.$el))},updated:function(){this.resizeObserver.observe(this.$el)},beforeDestroy:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)},methods:{getCurrentSize:function(){return this.$el?this.$el[this.shapeKey]:0},dispatchSizeChange:function(){this.$parent.$emit(this.event,this.uniqueKey,this.getCurrentSize(),this.hasInitial)}}},A=e.component("virtual-list-item",{mixins:[C],props:v,render:function(e){var t=this.tag,r=this.component,a=this.extraProps,i=void 0===a?{}:a,o=this.index,s=this.source,l=this.scopedSlots,u=void 0===l?{}:l,c=this.uniqueKey,d=this.slotComponent,h=n(n({},i),{},{source:s,index:o});return e(t,{key:c,attrs:{role:"listitem"}},[d?d({item:s,index:o,scope:h}):e(r,{props:h,scopedSlots:u})])}}),w=e.component("virtual-list-slot",{mixins:[C],props:b,render:function(e){var t=this.tag,n=this.uniqueKey;return e(t,{key:n,attrs:{role:n}},this.$slots.default)}}),S={ITEM:"item_resize",SLOT:"slot_resize"},x={HEADER:"thead",FOOTER:"tfoot"},k=e.component("virtual-list",{props:y,data:function(){return{range:null}},watch:{"dataSources.length":function(){this.virtual.updateParam("uniqueIds",this.getUniqueIdFromDataSources()),this.virtual.handleDataSourcesChange()},keeps:function(e){this.virtual.updateParam("keeps",e),this.virtual.handleSlotSizeChange()},start:function(e){this.scrollToIndex(e)},offset:function(e){this.scrollToOffset(e)}},created:function(){this.isHorizontal="horizontal"===this.direction,this.directionKey=this.isHorizontal?"scrollLeft":"scrollTop",this.installVirtual(),this.$on(S.ITEM,this.onItemResized),(this.$slots.header||this.$slots.footer)&&this.$on(S.SLOT,this.onSlotResized)},activated:function(){this.scrollToOffset(this.virtual.offset),this.pageMode&&document.addEventListener("scroll",this.onScroll,{passive:!1})},deactivated:function(){this.pageMode&&document.removeEventListener("scroll",this.onScroll)},mounted:function(){this.start?this.scrollToIndex(this.start):this.offset&&this.scrollToOffset(this.offset),this.pageMode&&(this.updatePageModeFront(),document.addEventListener("scroll",this.onScroll,{passive:!1}))},beforeDestroy:function(){this.virtual.destroy(),this.pageMode&&document.removeEventListener("scroll",this.onScroll)},methods:{getSize:function(e){return this.virtual.sizes.get(e)},getSizes:function(){return this.virtual.sizes.size},getOffset:function(){if(this.pageMode)return document.documentElement[this.directionKey]||document.body[this.directionKey];var e=this.$refs.root;return e?Math.ceil(e[this.directionKey]):0},getClientSize:function(){var e=this.isHorizontal?"clientWidth":"clientHeight";if(this.pageMode)return document.documentElement[e]||document.body[e];var t=this.$refs.root;return t?Math.ceil(t[e]):0},getScrollSize:function(){var e=this.isHorizontal?"scrollWidth":"scrollHeight";if(this.pageMode)return document.documentElement[e]||document.body[e];var t=this.$refs.root;return t?Math.ceil(t[e]):0},scrollToOffset:function(e){if(this.pageMode)document.body[this.directionKey]=e,document.documentElement[this.directionKey]=e;else{var t=this.$refs.root;t&&(t[this.directionKey]=e)}},scrollToIndex:function(e){if(e>=this.dataSources.length-1)this.scrollToBottom();else{var t=this.virtual.getOffset(e);this.scrollToOffset(t)}},scrollToBottom:function(){var e=this,t=this.$refs.shepherd;if(t){var n=t[this.isHorizontal?"offsetLeft":"offsetTop"];this.scrollToOffset(n),setTimeout((function(){e.getOffset()+e.getClientSize()+1<e.getScrollSize()&&e.scrollToBottom()}),3)}},updatePageModeFront:function(){var e=this.$refs.root;if(e){var t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView,r=this.isHorizontal?t.left+n.pageXOffset:t.top+n.pageYOffset;this.virtual.updateParam("slotHeaderSize",r)}},reset:function(){this.virtual.destroy(),this.scrollToOffset(0),this.installVirtual()},installVirtual:function(){this.virtual=new m({slotHeaderSize:0,slotFooterSize:0,keeps:this.keeps,estimateSize:this.estimateSize,buffer:Math.round(this.keeps/3),uniqueIds:this.getUniqueIdFromDataSources()},this.onRangeChanged),this.range=this.virtual.getRange()},getUniqueIdFromDataSources:function(){var e=this.dataKey;return this.dataSources.map((function(t){return"function"==typeof e?e(t):t[e]}))},onItemResized:function(e,t){this.virtual.saveSize(e,t),this.$emit("resized",e,t)},onSlotResized:function(e,t,n){e===x.HEADER?this.virtual.updateParam("slotHeaderSize",t):e===x.FOOTER&&this.virtual.updateParam("slotFooterSize",t),n&&this.virtual.handleSlotSizeChange()},onRangeChanged:function(e){this.range=e},onScroll:function(e){var t=this.getOffset(),n=this.getClientSize(),r=this.getScrollSize();t<0||t+n>r+1||!r||(this.virtual.handleScroll(t),this.emitEvent(t,n,r,e))},emitEvent:function(e,t,n,r){this.$emit("scroll",r,this.virtual.getRange()),this.virtual.isFront()&&this.dataSources.length&&e-this.topThreshold<=0?this.$emit("totop"):this.virtual.isBehind()&&e+t+this.bottomThreshold>=n&&this.$emit("tobottom")},getRenderSlots:function(e){for(var t=[],n=this.range,r=n.start,a=n.end,i=this.dataSources,o=this.dataKey,s=this.itemClass,l=this.itemTag,u=this.itemStyle,c=this.isHorizontal,d=this.extraProps,h=this.dataComponent,p=this.itemScopedSlots,f=this.$scopedSlots&&this.$scopedSlots.item,g=r;g<=a;g++){var m=i[g];if(m){var y="function"==typeof o?o(m):m[o];"string"==typeof y||"number"==typeof y?t.push(e(A,{props:{index:g,tag:l,event:S.ITEM,horizontal:c,uniqueKey:y,source:m,extraProps:d,component:h,slotComponent:f,scopedSlots:p},style:u,class:"".concat(s).concat(this.itemClassAdd?" "+this.itemClassAdd(g):"")})):console.warn("Cannot get the data-key '".concat(o,"' from data-sources."))}else console.warn("Cannot get the index '".concat(g,"' from data-sources."))}return t}},render:function(e){var t=this.$slots,n=t.header,r=t.footer,a=this.range,i=a.padFront,o=a.padBehind,s=this.isHorizontal,l=this.pageMode,u=this.rootTag,c=this.wrapTag,d=this.wrapClass,h=this.wrapStyle,p=this.headerTag,f=this.headerClass,g=this.headerStyle,m=this.footerTag,y=this.footerClass,v=this.footerStyle,b={padding:s?"0px ".concat(o,"px 0px ").concat(i,"px"):"".concat(i,"px 0px ").concat(o,"px")},C=h?Object.assign({},h,b):b;return e(u,{ref:"root",on:{"&scroll":!l&&this.onScroll}},[n?e(w,{class:f,style:g,props:{tag:p,event:S.SLOT,uniqueKey:x.HEADER}},n):null,e(c,{class:d,attrs:{role:"group"},style:C},this.getRenderSlots(e)),r?e(w,{class:y,style:v,props:{tag:m,event:S.SLOT,uniqueKey:x.FOOTER}},r):null,e("div",{ref:"shepherd",style:{width:s?"0px":"100%",height:s?"100%":"0px"}})])}});return k}(t)}(j);var z=P(j.exports);function F(e,t,n,r,a,i,o,s,l,u){"boolean"!=typeof o&&(l=s,s=o,o=!1);const c="function"==typeof n?n.options:n;let d;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,a&&(c.functional=!0)),r&&(c._scopeId=r),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=d):t&&(d=o?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),d)if(c.functional){const e=c.render;c.render=function(t,n){return d.call(n),e(t,n)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,d):[d]}return n}var V={props:{labelKey:String,valueKey:String,enKey:String,source:{type:Object,default:function(){return{}}}}},U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-option",{attrs:{label:e.source[e.labelKey],value:e.source[e.valueKey]}},[n("span",{staticStyle:{float:"left"}},[e._v(e._s(e.source[e.labelKey]))]),e._v(" "),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(e.source[e.enKey]))])])};U._withStripped=!0;var Q=F({render:U,staticRenderFns:[]},undefined,V,undefined,false,undefined,!1,void 0,void 0,void 0),J=K("virtual-select"),Z={components:{VirtualList:z},model:{prop:"value",event:"updateValue"},props:{value:String},data:function(){return{item:Q}},render:function(){var e=this,t=arguments[0];return t("ElSelect",{attrs:{"popper-class":J(),value:this.value,filterable:!0},props:o({},o({},this.$attrs)),on:o({},o(o({},this.$listeners),{},{change:function(t){var n=e.$attrs.options.find((function(n){return n[e.$attrs.valueKey]===t}));e.$emit("updateValue",t),e.$emit("change",t,n)}}))},[t(z,{class:"list-dynamic",attrs:{"data-key":this.$attrs.valueKey,"data-sources":this.$attrs.options,"data-component":Q,"extra-props":{labelKey:this.$attrs.labelKey,valueKey:this.$attrs.valueKey,enKey:this.$attrs.enKey},"estimate-size":34}})])}};const q="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function G(e){return(e,t)=>function(e,t){const n=q?t.media||"default":e,r=H[n]||(H[n]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);let n=t.source;if(t.map&&(n+="\n/*# sourceURL="+t.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",t.media&&r.element.setAttribute("media",t.media),void 0===Y&&(Y=document.head||document.getElementsByTagName("head")[0]),Y.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(n),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{const e=r.ids.size-1,t=document.createTextNode(n),a=r.element.childNodes;a[e]&&r.element.removeChild(a[e]),a.length?r.element.insertBefore(t,a[e]):r.element.appendChild(t)}}}(e,t)}let Y;const H={};var X=F({},(function(e){e&&e("data-v-bc5f22d2_0",{source:"\n\n/*# sourceMappingURL=index.vue.map */",map:{version:3,sources:["index.vue"],names:[],mappings:";;AAEA,oCAAoC",file:"index.vue"},media:void 0})}),Z,undefined,undefined,undefined,!1,G,void 0,void 0),_=K("address-map"),W={render:function(){var e=this,t=arguments[0];return t("div",{class:_("handler",{pc:!this.$attrs.isPhone,mb:this.$attrs.isPhone}),on:{click:function(){e.$emit("click")}}},[t("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAwBJREFUSEutVFtIFGEU/r7FwIcNDHbHyheDoqAipcKihJUK9CESIshZIx8Muj0IhTNBkVHgjvYSRQQV+uBOgkFGQj0YCgldEDIQEgzal8x2tgu0hYjNidlSd/Y2Es3b/Oc75zuX7xzC42vUvm4Rzh0XIERIuQBzBGIQDhJF3T3GijeFQjCfMdT0vnh1qb+LxOGCOQh6Zr/Lib6bSjIXLifBoZNx/7LleEaywqtCxy4iI1Offuwb7l4zk4nPSaBqiS5SmpYSfB4jgl7TCDZ4Eqi6tZXAaCbQCQCwl7SLRVBLMisBSlFF5kyyKlA1q5PE2XQCsaXZ7FDupr+FtcQpUG64EhFGokbgXPpbFkFYjz8GWLtYuoyZhlKZq11h3ZoEsHbRJk+iEaWuMIEWfw5yxwJI5H7UUA7lIlA16wGJ+rRkRkxDqS5IoOrxLsLV33fRSHBdJkEoNFS0umrjJMnyBQLgjhkJHitcQWtiD3wy6JoBqJuRgJH+prZaF+lDm4vY5t5oR+BpQQLHGNatIQChjKwHxJZ+IYsIR0WLrfmzCxg1jeB2T5k6gMZWa734ZAxg8VJ2wTkfNrm7tz3wckkEqSpaE0fhk+6lEEAkEjUUlzzn/fLeIgegaonLpJwvRCLA4NSL8brh4Zq5XDgXQX3L+5J50LexWNJxUvX4dYKnczkLMPFzJrnTwZZUlPszfZ3/FEHqcq70vyawIU1yA2YkuN+RY1nV5tvIuE0CidGerf7wanK6bMfGR67lBCamppOVzvFLEaha4gAp/ZlZivCKaQQupGaiJdpB0VOKgcRs/KrpjayKpb+7pC2sN43Aw78E1r18d19EWkxDueY4N+ifD/pgl8/+kmhfpzId1q0zAK7mnJGgJ2oEj9BpT1mp/yOIhf5nVWKjzewIXnItmocABEhOTSeDzNee7HZhhM71pK9YbDlNYpuXhEVYT1XL3x6vAJ52QQ9VLW6RDHiC/wEgIgmquvU2XZ7/ECevi7MnDJ/7sgsydwvgpv8ZHJBxH33NvwGeakJOAsqLcQAAAABJRU5ErkJggg=="}}),$hxt_address({key:"145e27-SelectAddress",desc:"选择地址"})])}},ee=F({},undefined,W,undefined,undefined,undefined,!1,void 0,void 0,void 0),te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAWJJREFUOE+1lTFLw0AUx98/sZSm4G5bRGkzOCsiuDnrUkpR9BsoOOmH0EnQbyAoQbvo7CaI6Nwhia2axl1oQ63Nkys0lOSwVM4b7//P797Le/cOJFm2bae1VLbC3C8TY4lAMwMb0weBnwC9FvbaV6ZpduOfI77hNFqbxHxMoILssGiPySPgoDSfvxz1RUDLsvTF5dUTZt79FRQTAZw9P97vV6vVvpAioNtsnU4KG7IFtDiX34uAgzSJLyaJLOnFlkgfogDQM87YfzbuNCaP+0EJbtPfZg7P5X7UEfJhJqPdCT0IwjXWcETECzI/oO3AabxfE6EsSaHO350V0zQ/RzXbtqcxZTzIoVyD8+K9Emg20U8hbRSLhVtZJK7rrbNGNwmN6Q1Ow/siolRcNNJaNpfLdWRA3/eNTjdsS7TePwDVp6y4KMrbRnlji0opvXrD0isdDgKqfHwNI1U2YGP39c9PwA+miewH7saLYgAAAABJRU5ErkJggg==",ne=K("address-map"),re={functional:!0,render:function(e,t){var n=t.props||{},r=t.listeners||{},a=n.item,i=n.language,o=n.mapType,s=r.select,l=a.pname,u=a.cityname,c=a.adname,d=a.address,h=void 0===d?"":d,p=a.name,f="";if("amap"===o){var g=[l,u,c];f=Array.from(new Set(g)).join("")}var m=h+p;return a.fullAddress=m,e("div",{class:ne("searchlist-item"),on:{click:function(){s(a)}}},[(a.isCurrentLocation,e("img",{attrs:{src:te}})),e("div",{class:"right"},[e("div",{class:"name"},[a.name]),e("div",{class:"detail"},["amap"===o?"".concat("zh_cn"===i?f:""):"",h])])])}},ae=F({},undefined,re,undefined,undefined,undefined,!1,void 0,void 0,void 0),ie=K("address-map"),oe={model:{prop:"inputValue",event:"input"},props:{inputValue:{type:String,default:""}},data:function(){return{value:""}},watch:{value:function(e){this.$emit("input",e)},inputValue:{handler:function(e){this.value=e},immediate:!0}},render:function(){var e=this,t=arguments[0];return t("div",{class:[ie("searchinput",{pc:!this.$attrs.isPhone,mb:this.$attrs.isPhone}),"hx-address-flexall-hor"]},[t("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABDVJREFUWEftl09oXFUUxr/zMtFkopBFCgUjpGhBECFik/ckir2TZF5KW0xXCkas0EKXFVwoFDquDIioSxFJxLjS0khTzZtJ5laq9E06YIQuKigNJP2zyCKLZFKZ5B3nzpvBIWTevZMsUiRve84953e/c9+55xIe8Y8ecT7sA+62QvsK7omCUsrYBsddJpwA4ADoAtAO8CpACwDnLVgzi1i79K4QD3cD2XCJPZl7B+ALBHpWl5iBBwQavYu1L3cKagx4VcqDMcTHCBiqAZtn8BSBloj5QUDUbgFdDB4A6JUav1tNQdNwf/+Rv3Wb2mo3AvxZ3uiyYEkKSwkGppvZOp9I9PxZL6HaUDPiFwGcC314FWydSCZ6f2kEUgt4RcqOxxC/GcLxw4AxMpRwLpkmSWfn+pl4goCDCjLGTUeiNtawgp7MXSZgWMFVFJg1hav6VSpwnYBOBt++h/UXTc9kpIKZrP86E01WynraFfY3jcJV/dPZm32gzRmAWhhIucL+yCRWJGBa5n4H0M3ApCvsUyYBo3w86X9MoA8ArKyhcOiUECu6mHUBvWzeJtr0VYCA0T2UsP/QBdPZL0vZ3ob4HdUzGTjjCvtr3Zr6gNL/hEDvA8gnhd2jC2RqT0v/W4BGGJhyhX1St64uYFr611UvY/CoK5wPdYFM7Z6ce4vAEwCWk8I+oFsXoWDuvmoNDBpxRe93ukCmdi/rv0REeeX/DwoHTgqxHLU2SsEiQDEwDSQTvQ23Fk0Dv6/sm2w9dyyi2SufKMB11RKIMTSYsD1ThXR+P0m/MwZaLAMiOHRMvLywIwU9mVsMGyt21f+2JveyN2wiq9wd7qLQqmvYUX9xhkADDP7cFc57OmVM7WoaKl2b46U2s1RqM0/r1kX9JBdLxhSD/3KFc1gXyNTuydwVgpojeSIpnLd16+oCXk3/1t3cHFM3CcB0tNEpZLvE4YTTeic82zw8mHB+3DGgWpiWvgToKMC/JoXzqi6Yzp6W/lhp4j6tynsPhcO68xf5F5cBs3OvgfhaWcQGLvjtQDPZ3HEmTIWxzHurdh5My9xXAM6UxvwN4qY3BxM9xrNgFTTcaDCtSgvgVlLYL+jUrtq1gGNStjyF1kx1hCfgwhIKn5qURyXx5NwbhGC8AlfJy+eTwvnCBFILqIKoqfpxtH4fnsfyN0/MqSVa97YDVa++Irf1gYJUdQ2DFwjoAOiJMIQZpBGgChcqGf/svzdGOcsKwNOlZr5AsJYZQUd4f2OAQJ01Cv2whsLZNm55HkSq1MaQxoDVZOGcuDFao2ZEpfga2ErVtqgt51GrZMOAVZrZ2fwzm1YwzGCn8tprUY8iVk9QkF8sFmePJ/vm6/zRLhNPVs9l1HW6Y0CTAx7lk8nmaiB5NSmcJ7fz3zNABaMgA8I4gWfqXXt7CmhShX1AE5WifPYV/N8r+C9+qJw4lCpHegAAAABJRU5ErkJggg=="},class:"search"}),t("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAzRJREFUWEftmM9PE1EQx7/TH1ATIsRALCcPSuw2GKGLgRaI9uSVAxdjjCSa+A/gzaM3PXjUgwnGGC8cOHjxVAzYQqQtRtJdAx48UQMxYJpY6NKRV8DUdbf7gwYb072+mXmfNzNv3swSGvyjBudDE/C4EWp68J96MJVVh7nMYwQeAijEQBvAPgI2QaQyYwmEN7GI9M4tqOMQJxIJX6AjeJOZHxDogq2NGaoHeDIoS89syVcJOQL88FG9qGk8BcKQ042EPIOXW/z+8YFLPV/s6tsGXFxWru+VMU2VMLr/mFH0ejE22Ce9tWPFFmAFbg8zRAjYMWol4wTSEnDp0+r53V1tpV5wR/AMFPxeGrhyOfS51oEsAZOZXJZAfVZecbXOWCj+yI/G43HNTL8m4GJauVcmPDVS3r/FGoiKVjnJ4C0w2ojIZwhBmIj2Sy9cAabSigJCSK8s4Pw+T2/h+/rX1vbgSwLGDQ8BTO9s52+1nek+V9LKK0aQDF6LRcI9jgGTGeUqAbPGG/PWzva37ng8XhR1sbU9+FoPyQdwN0T4EolEoLU9uGHqbaKRaH/ovdFepiFOppVHRJg0O5kO4A/IWmvG6YLHMVm67wgwlVESAK7VSn4jECFf5TlD7/5lk3k+KodHnQGmc+sgClrdTj2kkD8Mqz24gydmMypLXY4Ak+lcyfTm6SxVQ4ols7w0TRdGMSZLpxwCKj/tFufjA7IWk8N+R4CptLIBQufJhJjzUTnc7RAwNweikRO5JMBsNCLFHQE2fpnJqsNgnjd5IQo72/kuZ4X67DqBOoyfOxeFWhhKZnKrRl1zPZ86MNSoLEmOnzqhkMoqt8GYMq7+ollAwdQrh0qirQJzwKxkMehuLBJ67gqwMn+cDs65bfGtKwAvxyLh/lpylv2gmENKe7xk1VZZwejXRVfd0uLrtZpPLAGF4YZu+Y9OXi9IkZNeD8brOjQdQVbmk1Jp2vUIwFjw+WjCag6pTgdbIdbnTzKj3iHmSaNu27hu8tr+LX5Y3Mq/qjV/OHpJ7CT9718fhAEwi18fnQBpJEoLWGXQAnloxqxbtrOHKw/aMVwvmSbgcT3Z9OB/78FfCCLSOAOZh4AAAAAASUVORK5CYII="},class:"delete",directives:[{name:"show",value:this.value}],on:{click:function(){e.value=""}}}),t("input",N([{on:{input:[function(t){t.target.composing||(e.value=t.target.value)},function(t){e.value=t.target.value||""}],blur:function(){e.$emit("blur")},focus:function(){e.$emit("focus")}},class:"hx-select-flex",attrs:{type:"text",autocomplete:"off",placeholder:$hxt_address({key:"6cea2e-PleaseEnter",desc:"请输入"})},domProps:{value:e.value}},{directives:[{name:"model",value:e.value,modifiers:{}}]}])),this.$attrs.isPhone?t("span",{class:"cancel",on:{click:function(){e.$emit("cancel")}}},[$hxt_address({key:"6cea2e-Cancel",desc:"取消"})]):null])}},se=F({},undefined,oe,undefined,undefined,undefined,!1,void 0,void 0,void 0),le=K("address-map"),ue={props:{list:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}},mounted:function(){document.addEventListener("click",this.hideList,!1)},unmounted:function(){document.removeEventListener("click",this.hideList)},methods:{hideList:function(e){this.hasParent(e.target,"hx-address-map__searchlist")||this.hasParent(e.target,"van-field-address")||this.hasParent(e.target,"hx-address-map__searchinput")||this.$emit("hide")},hasParent:function(e,t){return!(!e.classList||!e.classList.contains(t))||!!e.parentNode&&this.hasParent(e.parentNode,t)}},render:function(){var e=this,t=arguments[0];return t("div",{class:le("searchlist"),directives:[{name:"loading",value:!this.$attrs.isPhone&&this.loading}]},[this.$attrs.isPhone&&this.loading?t("van-loading",{attrs:{color:"var(--hx-primary-color)"}}):this.list.length?t("ul",[this.list.map((function(n){return t(ae,{attrs:{item:n,language:e.$attrs.language,mapType:e.$attrs.mapType},on:{select:function(t){e.$emit("select",t)}}})}))]):t("div",{class:le("searchlist-empty")},[$hxt_address({key:"6acb0b-ThereIsCurrentlyNoDataAvailable",desc:"暂无数据"})])])}},ce=F({},undefined,ue,undefined,undefined,undefined,!1,void 0,void 0,void 0),de=p((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"error",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";L()?r.Toast(e):n.Message({message:e,type:t,duration:2e3})}))})),he=new de;function pe(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?a(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function fe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"==typeof SuppressedError&&SuppressedError;var ge=fe((function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!=a--;){var o=i[a];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}));const me="__googleMapsScriptId";var ye;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(ye||(ye={}));class ve{constructor({apiKey:e,authReferrerPolicy:t,channel:n,client:r,id:a=me,language:i,libraries:o=[],mapIds:s,nonce:l,region:u,retries:c=3,url:d="https://maps.googleapis.com/maps/api/js",version:h}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=t,this.channel=n,this.client=r,this.id=a||me,this.language=i,this.libraries=o,this.mapIds=s,this.nonce=l,this.region=u,this.retries=c,this.url=d,this.version=h,ve.instance){if(!ge(this.options,ve.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(ve.instance.options)}`);return ve.instance}ve.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?ye.FAILURE:this.done?ye.SUCCESS:this.loading?ye.LOADING:ye.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((n=>{n?t(n.error):e(window.google)}))}))}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,t;if(document.getElementById(this.id))return void this.callback();const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach((e=>!n[e]&&delete n[e])),(null===(t=null===(e=null===window||void 0===window?void 0:window.google)||void 0===e?void 0:e.maps)||void 0===t?void 0:t.importLibrary)||(e=>{let t,n,r,a="The Google Maps JavaScript API",i="google",o="importLibrary",s="__ib__",l=document,u=window;u=u[i]||(u[i]={});const c=u.maps||(u.maps={}),d=new Set,h=new URLSearchParams,p=()=>t||(t=new Promise(((o,u)=>pe(this,void 0,void 0,(function*(){var p;for(r in yield n=l.createElement("script"),n.id=this.id,h.set("libraries",[...d]+""),e)h.set(r.replace(/[A-Z]/g,(e=>"_"+e[0].toLowerCase())),e[r]);h.set("callback",i+".maps."+s),n.src=this.url+"?"+h,c[s]=o,n.onerror=()=>t=u(Error(a+" could not load.")),n.nonce=this.nonce||(null===(p=l.querySelector("script[nonce]"))||void 0===p?void 0:p.nonce)||"",l.head.append(n)})))));c[o]?console.warn(a+" only loads once. Ignoring:",e):c[o]=(e,...t)=>d.add(e)&&p().then((()=>c[o](e,...t)))})(n);const r=this.libraries.map((e=>this.importLibrary(e)));r.length||r.push(this.importLibrary("core")),Promise.all(r).then((()=>this.callback()),(e=>{const t=new ErrorEvent("error",{error:e});this.loadErrorCallback(t)}))}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setScript())}}}function be(e,t){return new Promise((function(n,r){if("amap"===e)if(window.AMap)n(AMap);else{var a=t();a instanceof Promise?a.then((function(e){n(e)})).catch((function(e){he.error($hxt_address({key:"48b301-MapLoadingFailed",desc:"地图加载失败"})),r(e)})):console.error("mapLoader() is not a Promise")}else if("google"===e){new ve({apiKey:"AIzaSyBBTv_rMwwmymSL0u-p6xffEuQcMQ0ECfo",version:"weekly",language:"en"}).load().then(d(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,google.maps.importLibrary("maps");case 2:t=e.sent,r=t.Map,n(r);case 5:case"end":return e.stop()}}),e)})))).catch((function(e){he.error($hxt_address({key:"48b301-MapLoadingFailed",desc:"地图加载失败"})),r(e)}))}}))}function Ce(e){return new Promise(function(){var t=d(s().mark((function t(n,r){var a,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("google"!==e){t.next=8;break}return t.next=3,google.maps.importLibrary("places");case 3:return a=t.sent,i=a.PlacesService,t.abrupt("return",n(i));case 8:window.AMap.plugin(["AMap.PlaceSearch","AMap.Autocomplete"],(function(){return n(AMap.PlaceSearch,AMap.Autocomplete)}));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}var Ae,we,Se=["公司企业","商务住宅","地名地址信息","道路附属设施","交通设施服务","金融保险服务","科教文化服务","政府机构及社会团体","公共设施","风景名胜","餐饮服务","住宿服务","医疗保健服务","体育休闲服务","生活服务","购物服务","摩托车服务","汽车维修","汽车销售","汽车服务"],xe=["4d4b7104d754a06370d81259","4d4b7105d754a06372d81259","4d4b7105d754a06373d81259","4d4b7105d754a06374d81259","4d4b7105d754a06376d81259","4d4b7105d754a06377d81259","4d4b7105d754a06375d81259","4e67e38e036454776db1fb3a","4d4b7105d754a06378d81259","4d4b7105d754a06379d81259"],ke={props:{loadMapLoading:{type:Boolean,default:!1},nearListLoading:{type:Boolean,default:!1},nearList:{type:Array,default:function(){return[]}}},data:function(){return{map:null,nearPlaceSearch:null}},methods:{initMap:function(){var e=this;return d(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.map){t.next=2;break}return t.abrupt("return");case 2:e.$emit("update:loadMapLoading",!0),n=e.$refs.container,e.map=new window.AMap.Map(n,{resizeEnable:!0,zoom:e.$attrs.zoom,vectorMapForeign:"style_".concat(e.$attrs.language)}),e.$emit("update:loadMapLoading",!1),e.initPlaceSearch();case 8:case"end":return t.stop()}}),t)})))()},initPlaceSearch:function(){var e=this;return d(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.syncMapLocation(),!e.$attrs.disabled){t.next=3;break}return t.abrupt("return");case 3:return e.$emit("update:nearListLoading",!0),t.next=6,Ce();case 6:e.nearPlaceSearch=new AMap.PlaceSearch({pageSize:20,pageIndex:1,children:1,lang:e.$attrs.language}),e.updateNearPlaceSearchConfig(),e.searchNear(),e.map.on("moveend",(function(t){e.searchNear()}));case 10:case"end":return t.stop()}}),t)})))()},updateNearPlaceSearchConfig:function(){if(this.nearPlaceSearch){var e=this.$attrs.value.countryCode;if(e){var t=this.$attrs.getCountryEnCodeByCountryCode(e),n=D(t)||M(t)?Se:xe;this.nearPlaceSearch.setType(n.join("|")),this.nearPlaceSearch.setLang(this.$attrs.language)}}},searchNear:function(){var e=this;if(this.map)if(this.isClickConfirm)this.isClickConfirm=!1;else{this.$emit("update:nearListLoading",!0);var t=this.map.getCenter();Promise.allSettled([this.searchNearHandler(t),this.getAddressByLngLat(t)]).then((function(t){var n=t[0],r=t[1];if("fulfilled"===n.status&&"fulfilled"===r.status){var a=n.value||[],i=r.value||[];list=[].concat(m(i),m(a))}else"fulfilled"===n.status&&"rejected"===r.status?list=n.value||[]:"rejected"===n.status&&"fulfilled"===r.status&&(list=r.value||[]);e.$emit("update:nearList",list)})).catch((function(){e.$emit("update:nearList",[])}))}},searchNearHandler:function(e){var t=this;return new Promise((function(n,r){t.nearPlaceSearch.searchNearBy("",e,500,(function(e,t){if("complete"===e){var r=t.poiList,a=((void 0===r?{}:r).pois||[]).map((function(e){return o(o({},e),{},{address:e.address===e.adname?"":e.address})}));n(a)}else n([])}))}))},getAddressByLngLat:function(e){var t=this;return new Promise((function(n,r){AMap.plugin("AMap.Geocoder",(function(){new AMap.Geocoder({extensions:"all",lang:t.$attrs.language}).getAddress(e,(function(t,r){if("complete"===t&&"OK"===r.info){var a,i=r.regeocode||{},o=i.formattedAddress,s=i.addressComponent,l=i.aois,u=s.province,c=void 0===u?"":u,d=s.city,h=void 0===d?"":d,p=s.district,f=void 0===p?"":p,g=s.township,m=void 0===g?"":g,y=s.street,v=void 0===y?"":y,b=s.streetNumber,C=void 0===b?"":b,A=c+h+f+m,w=(null===(a=l[0])||void 0===a?void 0:a.name)||o.replace(A,"")||o,S="".concat(v).concat(C);n([{pname:c,cityname:h,adname:f,name:w,address:S,location:{lng:e.lng,lat:e.lat},isCurrentLocation:!0}])}else n([])}))}))}))},syncMapLocation:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.map){var r=null===(e=this.$attrs.value)||void 0===e||null===(e=e.detailAddress)||void 0===e?void 0:e.location,a=t||r||this.$attrs.mapCenter;if(a){var i=g(a.split(","),2),o=i[0],s=i[1],l=this.map.getCenter();l.lng!==o&&l.lat!==s&&this.map.setCenter([o,s],n)}}},updateZoom:function(e){this.map&&this.map.setZoom(e)}},render:function(){return(0,arguments[0])("div",{ref:"container",style:"width: 100%; height: 100%;"})}},Le=F({},undefined,ke,undefined,undefined,undefined,!1,void 0,void 0,void 0),De=function(){return w.get("access_token")},Me={custom:!1,noErrorMsg:!1},Te=!1,Pe={},Oe=b(new URLSearchParams(location.search.slice(1)));try{for(Oe.s();!(we=Oe.n()).done;){var $e=g(we.value,2),Ie=$e[0],Ee=$e[1];Pe[Ie]=Ee}}catch(e){Oe.e(e)}finally{Oe.f()}Ae=Pe.devProxy||"/vue-api";var Re=a.create({method:"post",baseURL:Ae,withCredentials:!0,timeout:3e5});Re.interceptors.request.use((function(e){De()&&(e.headers.Authorization="Bearer "+De());var t=(e=Object.assign({},Me,e)).baseURL.indexOf("/vue-openapi")>-1?{appid:"10003",devKey:"a0f6483475c8fa48",proKey:"2a4c2f6983f2880d"}:{};return e.headers=o(o({},e.headers),window.hx.getSignHeaders({config:e,sign:t})),e}),(function(e){return Promise.reject(e)})),Re.interceptors.response.use(function(){var e=d(s().mark((function e(t){var n,r,a,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,r=t.config,a=t.headers["content-type"]&&-1===t.headers["content-type"].indexOf("json"),!r.custom&&!a){e.next=5;break}return e.abrupt("return",t);case 5:if(r.noErrorMsg||n.success){e.next=14;break}if(i=n.msg||n.message||"Error","blob"!==t.request.responseType){e.next=12;break}return e.next=10,Ne(n);case 10:o=e.sent,i=o.msg||n.message||"Error";case 12:return he.error(i),e.abrupt("return",Promise.reject(new Error(i)));case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return e&&e.response&&401===e.response.status&&!Te?(Te=!0,he.error($hxt_address({key:"cef97c-LoginStatusIsInvalidPleaseLogInAgain",desc:"登录态失效，请重新登录"})),Promise.reject(e)):(he.error($hxt_address({key:"cef97c-TheServerIsCurrentlyBusyPleaseTryAgainLater",desc:"当前服务器忙，请稍后再试。"})),Promise.reject(e))}));var Ne=function(e){return new Promise((function(t,n){var r=new FileReader;r.onerror=n,r.onload=function(){t(JSON.parse(r.result))},r.readAsText(e,"utf-8")}))},Be="/api-region",Ke="/api-map";function je(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"open-api":"api";return f({queryRegionByZeroLevel:"".concat(Be,"/").concat(e,"/region/queryRegionByZeroLevel"),queryRegionTree:"".concat(Be,"/").concat(e,"/region/queryRegionTree"),queryRegionInfoByLngLat:"".concat(Be,"/").concat(e,"/region/queryRegionInfoByLngLat"),queryRegionByZeroLevelByCurrentUser:"".concat(Be,"/").concat(e,"/region/queryRegionByZeroLevelByCurrentUser"),queryRegionInfoByShortUrl:"".concat(Be,"/").concat(e,"/region/queryRegionInfoByShortUrl"),queryNear:"".concat(Ke,"/").concat(e,"/google/getNearbySearch"),queryText:"".concat(Ke,"/").concat(e,"/google/getTextSearch"),queryMapDetail:"".concat(Ke,"/").concat(e,"/google/getPlaceDetail")},"queryMapDetail","".concat(Ke,"/").concat(e,"/google/getPlaceDetail"))}var ze={props:{loadMapLoading:{type:Boolean,default:!1},nearListLoading:{type:Boolean,default:!1},nearList:{type:Array,default:function(){return[]}}},data:function(){return{map:null}},methods:{initMap:function(){var e=this;return d(s().mark((function t(){var n,r,a,i,o,l,u,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.map){t.next=2;break}return t.abrupt("return");case 2:return e.$emit("update:loadMapLoading",!0),t.next=5,google.maps.importLibrary("maps");case 5:n=t.sent,r=n.Map,a=e.$refs.container,i=e.$attrs.mapCenter,o=i.split(","),l=g(o,2),u=l[0],c=l[1],e.map=new r(a,{center:{lat:+c,lng:+u},disableDefaultUI:!0,zoom:e.$attrs.zoom}),e.$emit("update:loadMapLoading",!1),e.initPlaceSearch();case 13:case"end":return t.stop()}}),t)})))()},initPlaceSearch:function(){var e=this;return d(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.syncMapLocation(),!e.$attrs.disabled){t.next=3;break}return t.abrupt("return");case 3:e.$emit("update:nearListLoading",!0),e.map.addListener("idle",(function(t){e.nearTimer&&clearTimeout(e.nearTimer),e.nearTimer=setTimeout((function(){e.searchNear()}),300)}));case 5:case"end":return t.stop()}}),t)})))()},updateNearPlaceSearchConfig:function(){},searchNear:function(){var e=this;return d(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.map){t.next=2;break}return t.abrupt("return");case 2:if(!e.isClickConfirm){t.next=5;break}return e.isClickConfirm=!1,t.abrupt("return");case 5:n=e.map.getCenter(),e.$emit("update:nearListLoading",!0),Promise.allSettled([e.searchNearHandler(n),e.getAddressByLngLat(n)]).then((function(t){var n=t[0],r=t[1];if("fulfilled"===n.status&&"fulfilled"===r.status){var a=n.value||[],i=r.value||[];list=[].concat(m(i),m(a))}else"fulfilled"===n.status&&"rejected"===r.status?list=n.value||[]:"rejected"===n.status&&"fulfilled"===r.status&&(list=r.value||[]);e.$emit("update:nearList",list)})).catch((function(){e.$emit("update:nearList",[])}));case 8:case"end":return t.stop()}}),t)})))()},searchNearHandler:function(e){var t=this;return new Promise(function(){var n=d(s().mark((function n(r,a){var i,o,l,u;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i={languageCode:t.$attrs.language,locationRestriction:{circle:{center:{latitude:e.lat(),longitude:e.lng()},radius:500}}},n.next=4,Re({baseURL:k(t.$attrs.openapi),url:je(t.$attrs.openapi).queryNear,data:{fields:"places.displayName,places.formattedAddress,places.location",jsonBody:JSON.stringify(i)}});case 4:o=n.sent,l=o.data?JSON.parse(o.data):{},u=(l.places||[]).map((function(e){var t;return{name:(null===(t=e.displayName)||void 0===t?void 0:t.text)||"",address:e.formattedAddress||"",location:{lng:e.location.longitude,lat:e.location.latitude}}})),r(u),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),r([]);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}())},getAddressByLngLat:function(e){var t=this;return new Promise(function(){var n=d(s().mark((function n(r,a){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:new google.maps.Geocoder({language:t.$attrs.language}).geocode({location:e}).then(function(){var e=d(s().mark((function e(n,a){var i,o,l,u,c,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=n.results)[0]){e.next=10;break}return(l=i[0]).formatted_address,l.address_components,u=l.place_id,e.next=5,Re({baseURL:k(t.$attrs.openapi),url:je(t.$attrs.openapi).queryMapDetail,data:{fields:"displayName,formattedAddress,location",languageCode:t.$attrs.language,placeId:u}});case 5:c=e.sent,d=c.data?JSON.parse(c.data):{},r([{name:(null===(o=d.displayName)||void 0===o?void 0:o.text)||"",address:d.formattedAddress||"",location:{lng:d.location.longitude,lat:d.location.latitude},isCurrentLocation:!0}]),e.next=11;break;case 10:r([]);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()).catch((function(e){r([])}));case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())},syncMapLocation:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.map){var n=null===(e=this.$attrs.value)||void 0===e||null===(e=e.detailAddress)||void 0===e?void 0:e.location,r=t||n||this.$attrs.mapCenter;if(r){var a=g(r.split(","),2),i=a[0],o=a[1],s=this.map.getCenter();(null==s?void 0:s.lng())!==i&&(null==s?void 0:s.lat())!==o&&this.map.setCenter({lng:+i,lat:+o})}}},updateZoom:function(e){this.map&&this.map.setZoom(e)}},render:function(){return(0,arguments[0])("div",{ref:"container",style:"width: 100%; min-height:200px;height:100%"})}},Fe=F({},undefined,ze,undefined,undefined,undefined,!1,void 0,void 0,void 0),Ve=K("address-map"),Ue={components:{SearchList:ce,AMap:Le,GoogleMap:Fe},props:{value:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!1},position:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},hasLoadMap:{type:Boolean,default:!1},mapType:String,getCountryEnCodeByCountryCode:{type:Function,default:function(){}},mapCenter:{type:String,default:""},language:{type:String,default:"zh_cn"}},data:function(){return{animate:!1,loadMapLoading:!0,nearList:[],nearListLoading:!0,nearPlaceSearch:null,zoom:16}},watch:{value:{handler:function(){this.updateNearPlaceSearchConfig(),this.syncMapLocation()},immediate:!0,deep:!0},mapCenter:{handler:function(){this.updateNearPlaceSearchConfig(),this.syncMapLocation(this.mapCenter,!0)}},visible:{handler:function(e){e&&this.syncMapLocation()},immediate:!0},hasLoadMap:{handler:function(e){var t=this;e&&this.$nextTick((function(){t.initMap()}))},immediate:!0}},methods:{initMap:function(){var e=this;return d(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$refs.map.initMap();case 1:case"end":return t.stop()}}),t)})))()},updateNearPlaceSearchConfig:function(){var e=this;this.$nextTick((function(){e.$refs.map.updateNearPlaceSearchConfig&&e.$refs.map.updateNearPlaceSearchConfig()}))},getLocation:function(){this.$attrs.loading.curlocation||this.$attrs.updateCurLocationInMapCenter(!0)},syncMapLocation:function(e,t){var n=this;this.$nextTick((function(){n.$refs.map.syncMapLocation(e,t)}))},updateZoom:function(){var e;null===(e=this.$refs)||void 0===e||e.map.updateZoom(this.zoom)}},render:function(){var e=this,t=arguments[0],n="amap"===this.mapType?"AMap":"GoogleMap";return t("div",{class:["hx-address-flexall"]},[t("div",{class:[Ve({pc:!this.$attrs.isPhone,mb:this.$attrs.isPhone,disabled:this.disabled}),"hx-address-flex"],directives:[{name:"loading",value:!this.$attrs.isPhone&&this.loadMapLoading}]},[t(n,N([{ref:"map"},{attrs:o(o({loadMapLoading:this.loadMapLoading,nearListLoading:this.nearListLoading,nearList:this.nearList,zoom:this.zoom},this.$props),this.$attrs)},{},{on:{"update:loadMapLoading":function(t){e.loadMapLoading=t},"update:nearListLoading":function(t){e.nearListLoading=t},"update:nearList":function(t){null!=t&&t.length&&(e.animate=!0,e.timer&&clearTimeout(e.timer),e.timer=setTimeout((function(){e.animate=!1}),1e3)),e.nearList=t||[],e.nearListLoading=!1}}}])),this.$attrs.isPhone&&this.loadMapLoading?t("van-loading",{attrs:{color:"var(--hx-primary-color)"}}):null,this.disabled?t("div",{class:"mask"}):null,t("img",{attrs:{src:"data:image/png;base64,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"},class:{"img-location":!0,animate:this.animate}}),window.isApp&&this.position?t("div",{class:{"img-position":!0,loading:this.$attrs.loading.curlocation},on:{click:this.getLocation}},[t("img",{attrs:{src:"data:image/png;base64,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"}})]):null]),this.disabled?"":t(ce,{style:"padding:10px 0;",class:{show:!0},attrs:{isPhone:this.$attrs.isPhone,list:this.nearList,loading:this.nearListLoading,language:this.language,mapType:this.mapType},on:{select:function(t){e.isClickConfirm=!0;var n=t.name,r=t.fullAddress,a=t.location||{},i=a.lng,o=a.lat,s="".concat(i,",").concat(o);e.syncMapLocation(s,!0),e.$emit("confirm",{from:"box",name:n,fullAddress:r,location:s})}}})])}},Qe=F({},undefined,Ue,undefined,undefined,undefined,!1,void 0,void 0,void 0),Je=K("address-map"),Ze={components:{SearchInput:se,Map:Qe,SearchList:ce},props:{searchAddress:{type:Function},value:{type:Object,default:function(){return{}}},hasLoadMap:{type:Boolean,default:!1},mapType:String},watch:{visible:{handler:function(e){e||(this.inputValue="",this.list=[],this.listVisible=!1)},immediate:!0}},data:function(){return{visible:!1,inputValue:"",list:[],listLoading:!1,listVisible:!1}},methods:{open:function(){this.visible=!0},searchAddressList:function(e){var t=this;return d(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.length?(t.listLoading=!0,t.listVisible=!0,t.timer&&clearTimeout(t.timer),t.timer=setTimeout(d(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.searchAddress(e);case 2:r=n.sent,t.listLoading=!1,t.list=r||[];case 5:case"end":return n.stop()}}),n)}))),300)):(t.list=[],t.listVisible=!1);case 1:case"end":return n.stop()}}),n)})))()}},render:function(){var e=this,t=arguments[0],n=this.$attrs.isPhone?"van-popup":"el-dialog",r={value:this.visible,style:"height: 100%",overlayStyle:{"background-color":"transparent"},position:"bottom"},a={appendToBody:!0,closeOnClickModal:!1,closeOnPressEscape:!1,visible:this.visible,title:$hxt_address({key:"7e9880-AddressSelection",desc:"地址选择"}),center:!0,width:"95%",height:"95%"};return t(n,{attrs:o({},this.$attrs.isPhone?r:a),class:[Je("dialog",{pc:!this.$attrs.isPhone,mb:this.$attrs.isPhone}),"hx-address-flexall"],on:{close:function(){var t;null===(t=e.$refs.map)||void 0===t||t.updateZoom(),e.visible=!1}}},[t(se,{attrs:{isPhone:this.$attrs.isPhone},on:{input:function(t){e.searchAddressList(t)},focus:function(){e.inputValue.length&&(e.listVisible=!0)},cancel:function(){e.visible=!1}},model:{value:e.inputValue,callback:function(t){e.inputValue=t}}}),t(ce,{class:{autocomplete:!0,show:this.listVisible},attrs:{list:this.list,isPhone:this.$attrs.isPhone,loading:this.listLoading},on:{hide:function(){e.listVisible&&(e.listVisible=!1)},select:function(t){e.$emit("select",t,(function(){e.inputValue="",e.visible=!1}))}}}),t("div",{class:"hx-address-flex",style:"background:#fff"},[t(Qe,{ref:"map",attrs:{position:!0,visible:this.visible,hasLoadMap:this.hasLoadMap,mapType:this.mapType,getCountryEnCodeByCountryCode:this.$attrs.getCountryEnCodeByCountryCode,updateCurLocationInMapCenter:this.$attrs.updateCurLocationInMapCenter,loading:this.$attrs.loading,language:this.$attrs.language,mapCenter:this.$attrs.mapCenter,openapi:this.$attrs.openapi,isPhone:this.$attrs.isPhone},on:{confirm:function(t,n){e.$emit("select",t,(function(){e.inputValue="",e.visible=!1}))}},model:{value:e.value,callback:function(t){e.value=t}}})])])}},qe=F({},undefined,Ze,undefined,undefined,undefined,!1,void 0,void 0,void 0),Ge={props:{lazy:{type:Boolean,default:!0},options:{type:Array,default:function(){return[]}},props:{type:Object,default:function(){return{}}},value:{type:[Array],default:function(){return[]}}},data:function(){return{showOptions:[],dataValue:[]}},computed:{mergeProps:function(){return o(o({},this.props),{},{value:this.props.value||"value",label:this.props.label||"label",children:this.props.children||"children",lazy:this.isLazy,lazyLoad:this.getNode})},isLazy:function(){return!this.props.multiple&&this.lazy}},watch:{options:{handler:function(e){var t;this.isLazy&&e.length&&null!==(t=this.$refs.cascader)&&void 0!==t&&t.panel?(this.$refs.cascader.panel.loadCount=0,this.$refs.cascader.panel.lazyLoad()):this.isLazy||(this.showOptions=e)},immediate:!0,deep:!0},value:{handler:function(e){var t;this.handleChange?this.handleChange=!1:(this.dataValue=e,null!==(t=this.$refs)&&void 0!==t&&null!==(t=t.cascader)&&void 0!==t&&t.panel&&this.options.length&&(this.$refs.cascader.panel.loadCount=0,this.$refs.cascader.panel.lazyLoad()))},immediate:!0,deep:!0},dataValue:{handler:function(e){this.$emit("input",e)},immediate:!0,deep:!0}},methods:{getNode:function(e,t){var n=this;return d(s().mark((function r(){var a,i,o,l;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=e.level,i=e.value,e.data,0==a?(o=n.getFirstLevelNode(),setTimeout((function(){return t(o)}),50)):(l=n.getChildren(i),setTimeout((function(){return t(l)}),50));case 2:case"end":return r.stop()}}),r)})))()},getChildrenByParentCode:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0;r<e.length;r++){var a=e[r];if(a[this.mergeProps.value]===t){n=a[this.mergeProps.children];break}a[this.mergeProps.children]&&(n=this.getChildrenByParentCode(a[this.mergeProps.children],t,n))}return n},getChildren:function(e){return this.getChildrenByParentCode(this.options,e).map((function(e){return o(o({},e),{},{children:void 0})}))},getFirstLevelNode:function(){return this.options.map((function(e,t){return o(o({},e),{},{children:void 0})}))},changeHandler:function(){this.handleChange=!0}}},Ye=Ge,He=function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",e._g(e._b({ref:"cascader",attrs:{props:e.mergeProps,options:e.showOptions},on:{change:e.changeHandler},model:{value:e.dataValue,callback:function(t){e.dataValue=t},expression:"dataValue"}},"el-cascader",e.$attrs,!1),e.$listeners))};He._withStripped=!0;var Xe=F({render:He,staticRenderFns:[]},undefined,Ye,undefined,false,undefined,!1,void 0,void 0,void 0),_e=K("address"),We={components:{VirtualSelect:X,ElCascaderPlus:Xe,MapHandler:ee,MapDialog:qe,Map:Qe},model:{prop:"value",event:"confirm"},props:{visible:{type:Boolean,default:!1},title:String,value:{type:Object,default:function(){return{}}},countryData:{type:Array,default:function(){return[]}},regionTreeData:{type:Object,default:function(){return{}}},hasLoadMap:{type:Boolean,default:!1},mapType:String,getRegionInfoByLngLat:{type:Function,default:function(){}}},data:function(){return{formData:{countryCode:"",regionCode:[],detailAddress:{},parseAddress:""}}},computed:{countryCodeArr:function(){return this.$attrs.countryMultiple?this.formData.countryCode:this.formData.countryCode?[this.formData.countryCode]:[]}},watch:{value:{handler:function(e){this.formData=JSON.parse(JSON.stringify(e))},immediate:!0,deep:!0}},methods:{handleClose:function(){this.$emit("close",!1)},handleConfirm:function(){this.$emit("confirm",this.formData)},handleSelectAddress:function(e,t){this.$emit("selectAddress",e,t,this.formData)}},render:function(){var e,t=this,n=arguments[0];return n("div",[n("el-dialog",N([{attrs:{"append-to-body":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:this.visible,title:this.title,center:!0,"custom-class":_e({mb:this.$attrs.isPhone,pc:!this.$attrs.isPhone}),width:"80%"}},{on:{close:function(e){t.$emit("close",e)}}},{scopedSlots:{footer:function(){return n("div",{class:"dialog-footer"},[n("el-button",{attrs:{size:"medium","native-type":"button"},on:{click:t.handleClose}},[$hxt_address({key:"ee0fb5-Cancel",desc:"取 消"})]),n("el-button",{attrs:{size:"medium",type:"primary","native-type":"button",loading:t.$attrs.loading[t.formData.countryCode]},on:{click:t.handleConfirm}},[$hxt_address({key:"ee0fb5-Confirm",desc:"确 定"})])])}}}]),[n("div",{slot:"footer"}),n("el-form",N([{ref:"form"},{props:{model:this.formData}},{attrs:{"label-width":"130px"}}]),[this.$scopedSlots.top?this.$scopedSlots.top(this.formData):"",n("el-form-item",{attrs:{label:$hxt_address({key:"ee0fb5-Countryregion",desc:"国家/地区"}),prop:"countryCode"}},[n(X,{directives:[{name:"loading",value:this.$attrs.loading.country}],attrs:{"element-loading-spinner":"el-icon-loading",placeholder:this.$attrs.loading.country?$hxt_address({key:"ee0fb5-Loading",desc:"加载中..."}):$hxt_address({key:"ee0fb5-PleaseSelect",desc:"请选择"}),options:this.countryData,labelKey:this.$attrs.mapKey.country.labelKey,valueKey:this.$attrs.mapKey.country.valueKey,enKey:this.$attrs.mapKey.country.enKey},on:{change:function(e,n){t.formData.detailAddress={},t.$emit("changeCountry",t.formData.countryCode)}},model:{value:t.formData.countryCode,callback:function(e){t.$set(t.formData,"countryCode",e)}}})]),null!==(e=this.countryCodeArr)&&void 0!==e&&e.length?this.countryCodeArr.map((function(e){var r;return n("el-form-item",{attrs:{label:$hxt_address({key:"ee0fb5-Region",desc:"区域"}),prop:"regionCode-".concat(e)},style:{display:t.$attrs.loading[e]||null!==(r=t.regionTreeData[e])&&void 0!==r&&r.length?"flex":"none"}},[n("ElCascader",N([{class:{loading:t.$attrs.loading[e]},attrs:{placeholder:t.$attrs.loading[e]?$hxt_address({key:"ee0fb5-Loading",desc:"加载中..."}):$hxt_address({key:"ee0fb5-PleaseSelect",desc:"请选择"}),"element-loading-spinner":"el-icon-loading",clearable:!0,"collapse-tags":t.$attrs.collapseTags,options:t.regionTreeData[e]||[]},directives:[{name:"loading",value:t.$attrs.loading[e]}]},{on:{change:function(e){t.$emit("changeRegion",t.formData.countryCode,e)}}},{},{props:{props:{value:t.$attrs.mapKey.region.valueKey,label:t.$attrs.mapKey.region.labelKey,children:t.$attrs.mapKey.region.childrenKey,multiple:t.$attrs.regionMultiple,checkStrictly:t.$attrs.checkStrictly}}},{model:{value:t.formData["regionCode-".concat(e)],callback:function(n){t.$set(t.formData,"regionCode-".concat(e),n)}}}]))])})):n("el-form-item",{attrs:{label:$hxt_address({key:"ee0fb5-Region",desc:"区域"}),prop:"regionCode"}},[n("el-select",{attrs:{placeholder:$hxt_address({key:"ee0fb5-PleaseSelect",desc:"请选择"})},on:{focus:function(){t.formData.countryCode||he.error($hxt_address({key:"ee0fb5-PleaseSelectACountryregionFirst",desc:"请先选择国家/地区"}))}},model:{value:t.formData,callback:function(e){t.formData=e}}})]),this.$attrs.showDetail?n("el-form-item",{attrs:{label:$hxt_address({key:"ee0fb5-DetailedAddress",desc:"详细地址"}),prop:"fullAddress"}},[this.$attrs.mapLoader||window.AMap||"google"===this.mapType?n("el-autocomplete",{attrs:{"popper-class":_e("autocomplete",{pc:!this.$attrs.isPhone}),clearable:!0,"value-key":"fullAddress","fetch-suggestions":function(){var e=d(s().mark((function e(n,r){var a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",r([]));case 2:return e.next=4,t.$attrs.searchAddress(n);case 4:a=e.sent,r(a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),placeholder:$hxt_address({key:"ee0fb5-PleaseEnter",desc:"请输入"})},ref:"autocomplete",on:{input:function(e){if(t.isClickListItem)t.isClickListItem=!1;else{var n=t.formData.detailAddress.fullAddress;t.formData.detailAddress={fullAddress:n}}},clear:function(){t.$refs.autocomplete.$refs.input.blur()},blur:function(){if(t.$attrs.needLngLat){var e=t.formData.detailAddress,n=e.location;e.fullAddress&&!n&&(t.formData.detailAddress={})}}},scopedSlots:{append:function(){return t.$attrs.showMap?n(ee,{attrs:{isPhone:t.$attrs.isPhone},on:{click:function(){t.$refs.mapDialog.open()}}}):null},default:function(e){var r=e.item;return n(ae,{attrs:{item:r,language:t.$attrs.language},on:{select:function(e){t.isClickListItem=!0,t.handleSelectAddress(e)}}})}},model:{value:t.formData.detailAddress.fullAddress,callback:function(e){t.$set(t.formData.detailAddress,"fullAddress",e)}}},[n("div",{slot:"append"})]):n("el-input",{attrs:{placeholder:$hxt_address({key:"ee0fb5-PleaseEnter",desc:"请输入"})},model:{value:t.formData.detailAddress.fullAddress,callback:function(e){t.$set(t.formData.detailAddress,"fullAddress",e)}}})]):"",this.$attrs.showAddressParse?n("el-form-item",{attrs:{label:$hxt_address({key:"ee0fb5-AddressLink",desc:"地址链接"}),prop:"parseAddress"}},[n("el-input",{directives:[{name:"loading",value:this.$attrs.loading.parseAddress}],attrs:{"element-loading-spinner":"el-icon-loading",clearable:!0,placeholder:$hxt_address({key:"ee0fb5-PleaseEnter",desc:"请输入"})},scopedSlots:{append:function(){return n("div",{class:"parse-btn",on:{click:t.$attrs.parseAddress.bind(t,t.formData)}},[$hxt_address({key:"ee0fb5-Analysis",desc:"解析"})])}},model:{value:t.formData.parseAddress,callback:function(e){t.$set(t.formData,"parseAddress",e)}}},[n("div",{slot:"append"})])]):""]),this.$attrs.showMap&&n("div",{on:{click:function(){t.$refs.mapDialog.open()}}},[n(Qe,{ref:"map",attrs:{disabled:!0,hasLoadMap:this.hasLoadMap,mapType:this.mapType,mapCenter:this.$attrs.mapCenter,language:this.$attrs.language,openapi:this.$attrs.openapi,isPhone:this.$attrs.isPhone,loading:this.$attrs.loading,updateCurLocationInMapCenter:this.$attrs.updateCurLocationInMapCenter},model:{value:t.formData,callback:function(e){t.formData=e}}})])]),this.$attrs.showMap&&n(qe,{ref:"mapDialog",attrs:{searchAddress:this.$attrs.searchAddress,hasLoadMap:this.hasLoadMap,mapType:this.mapType,getCountryEnCodeByCountryCode:this.$attrs.getCountryEnCodeByCountryCode,isPhone:this.$attrs.isPhone,openapi:this.$attrs.openapi,mapCenter:this.$attrs.mapCenter,language:this.$attrs.language,updateCurLocationInMapCenter:this.$attrs.updateCurLocationInMapCenter,loading:this.$attrs.loading},on:{select:function(e,n){t.handleSelectAddress(e,n)}},model:{value:t.formData,callback:function(e){t.formData=e}}})])}},et=F({},undefined,We,undefined,undefined,undefined,!1,void 0,void 0,void 0),tt={props:{labelKey:String,valueKey:String,getCheckedListItem:{type:Function,default:function(){}},source:{type:Object,default:function(){return{}}}}},nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"country-item",on:{click:function(t){return e.getCheckedListItem(e.source)}}},[n("div",{staticClass:"fl"},[e._v("\n    "+e._s(e.source[e.labelKey])+"\n  ")]),e._v(" "),n("div",{staticClass:"fr"},[e._v("\n    "+e._s(e.source[e.valueKey])+"\n  ")])])};nt._withStripped=!0;var rt=F({render:nt,staticRenderFns:[]},undefined,tt,undefined,false,undefined,!1,void 0,void 0,void 0),at={components:{VirtualList:z,CountryItem:rt},props:{value:{type:[String,Number,Array]},countryData:{type:Array,default:function(){return[]}},allCountryData:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1}},computed:{countryName:function(){var e=this;return(this.$attrs.countryMultiple?this.value:this.value?[this.value]:[]).map((function(t){return e.allCountryData[t]?e.allCountryData[t][e.$attrs.mapKey.country.labelKey]:[]})).join(",")}},render:function(){var e=this,t=arguments[0];return t("div",[t("van-field",{attrs:{name:"countryName","is-link":!0,label:$hxt_address({key:"f813a8-Countryregion",desc:"国家/地区"}),placeholder:$hxt_address({key:"f813a8-PleaseSelect",desc:"请选择"}),readonly:!0},on:{click:function(){e.visible=!0}},scopedSlots:{"right-icon":function(){return e.$attrs.loading.country?t("van-loading",{attrs:{color:"var(--hx-primary-color)"}}):""}},model:{value:e.countryName,callback:function(t){e.countryName=t}}}),t("van-popup",{attrs:{position:"bottom",round:!0},style:{"max-height":"50%",height:"auto"},class:"hx-address-flexall",model:{value:e.visible,callback:function(t){e.visible=t}}},[t(z,{class:"list-dynamic hx-address-flex",attrs:{"data-key":this.$attrs.mapKey.country.valueKey,"data-sources":this.countryData,"data-component":rt,"extra-props":{labelKey:this.$attrs.mapKey.country.labelKey,valueKey:this.$attrs.mapKey.country.enKey,getCheckedListItem:function(t){e.$emit("input",t[e.$attrs.mapKey.country.valueKey]),e.$emit("change",t[e.$attrs.mapKey.country.valueKey],t),e.visible=!1}},"estimate-size":46}})])])}},it=F({},undefined,at,undefined,undefined,undefined,!1,void 0,void 0,void 0),ot={props:{value:{type:Array,default:function(){return[]}},regionData:{type:Array,default:function(){return[]}},countryCode:{type:String,default:""},allRegionData:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1,selectedValue:"",regionCode:[]}},watch:{value:{handler:function(e){this.regionCode=e||[]},immediate:!0,deep:!0},regionCode:{handler:function(e){var t=this;this.$nextTick((function(){t.selectedValue=t.regionCode[t.regionCode.length-1]}))},immediate:!0,deep:!0}},computed:{regionName:function(){if(this.countryCode&&this.allRegionData[this.countryCode]&&this.selectedValue){var e,t=null===(e=this.allRegionData[this.countryCode][this.selectedValue])||void 0===e?void 0:e.fullName;return t?t.join("/"):""}return""}},methods:{handleConfirm:function(){this.$attrs.checkStrictly||this.$attrs.isEndRegionCode(this.countryCode,this.regionCode[this.regionCode.length-1])?(this.visible=!1,this.$emit("input",this.regionCode),this.$emit("changeRegion",this.regionCode)):this.$toast($hxt_address({key:"d33061-PleaseSelectTheLastLevelArea",desc:"请选到最后一级区域"}))},handleCancel:function(){this.regionCode=this.value||[],this.visible=!1}},render:function(){var e=this,t=arguments[0];return t("div",[t("van-field",{attrs:{"is-link":!0,readonly:!0,label:$hxt_address({key:"d33061-Region",desc:"区域"}),placeholder:this.$attrs.loading[this.countryCode]?$hxt_address({key:"d33061-Loading",desc:"加载中..."}):$hxt_address({key:"d33061-PleaseSelect",desc:"请选择"})},on:{click:function(){e.visible=!0}},scopedSlots:{"right-icon":function(){return e.$attrs.loading[e.countryCode]?t("van-loading",{attrs:{color:"var(--hx-primary-color)"}}):""}},model:{value:e.regionName,callback:function(t){e.regionName=t}}}),t("van-popup",{attrs:{round:!0,position:"bottom","close-on-click-overlay":!1},model:{value:e.visible,callback:function(t){e.visible=t}}},[t("van-cascader",{attrs:{options:this.regionData,"field-names":{text:this.$attrs.mapKey.region.labelKey,value:this.$attrs.mapKey.region.valueKey,children:this.$attrs.mapKey.region.childrenKey},"active-color":"var(--hx-primary-color)",closeable:!1},scopedSlots:{title:function(n){return t("div",{class:"hx-address-flexall-hor"},[t("div",{class:"fl",on:{click:e.handleCancel}},[$hxt_address({key:"d33061-Cancel",desc:"取消"})]),t("div",{class:"hx-address-flex middle"},[$hxt_address({key:"d33061-Region",desc:"地区"})]),t("div",{class:"fr",on:{click:e.handleConfirm}},[$hxt_address({key:"d33061-Confirm",desc:"确定"})])])}},on:{change:function(t){var n=t.selectedOptions;e.regionCode=n.map((function(t){return t[e.$attrs.mapKey.region.valueKey]}))}},model:{value:e.selectedValue,callback:function(t){e.selectedValue=t}}})])])}},st=F({},undefined,ot,undefined,undefined,undefined,!1,void 0,void 0,void 0),lt={components:{MapHandler:ee,SearchList:ce},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{visible:!1,list:[]}},methods:{searchAddress:function(e){var t=this;return d(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e||!e.length){n.next=8;break}return t.visible=!0,n.next=4,t.$attrs.searchAddress(e);case 4:r=n.sent,t.list=r||[],n.next=10;break;case 8:t.visible=!1,t.list=[];case 10:case"end":return n.stop()}}),n)})))()},focus:function(){this.$refs["van-field-address"].focus()}},render:function(){var e=this,t=arguments[0];return t("div",[this.$attrs.mapLoader||window.AMap||"google"===this.$attrs.mapType?t("van-field",{ref:"van-field-address",class:"van-field-address",attrs:{name:"fullAddress",label:$hxt_address({key:"4a5a3f-DetailedAddress",desc:"详细地址"}),placeholder:$hxt_address({key:"4a5a3f-PleaseEnter",desc:"请输入"}),clearable:!0,autocomplete:"off"},on:{focus:function(t){e.searchAddress(e.value.fullAddress)},blur:function(){e.$emit("blur")},input:function(){var t=d(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$emit("input",{fullAddress:n}),e.searchAddress(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},scopedSlots:{button:function(){return t("div",[e.$attrs.showMap&&t(ee,{attrs:{isPhone:e.$attrs.isPhone},on:{click:function(){e.visible=!1,e.$emit("mapHandlerClick")}}}),t(ce,{attrs:{list:e.list,loading:e.$attrs.loading.detail,isPhone:e.$attrs.isPhone},directives:[{name:"show",value:e.visible}],on:{hide:function(){e.visible&&(e.visible=!1)},select:function(t){var n=t.name,r=t.fullAddress,a=t.location;e.$emit("select",t),e.$emit("input",{fullAddress:r,name:n,location:a}),e.visible=!1}}})])}},model:{value:e.value.fullAddress,callback:function(t){e.$set(e.value,"fullAddress",t)}}}):t("van-field",{class:"van-field-address",attrs:{name:"fullAddress",label:$hxt_address({key:"4a5a3f-DetailedAddress",desc:"详细地址"}),placeholder:$hxt_address({key:"4a5a3f-PleaseEnter",desc:"请输入"}),autocomplete:"off"},model:{value:e.value.fullAddress,callback:function(t){e.$set(e.value,"fullAddress",t)}}})])}},ut=F({},undefined,lt,undefined,undefined,undefined,!1,void 0,void 0,void 0),ct=K("address"),dt={components:{Country:it,Region:st,MapDialog:qe,Map:Qe},model:{prop:"value",event:"confirm"},props:{visible:{type:Boolean,default:!1},value:{type:Object,default:function(){return{}}},countryData:{type:Array,default:function(){return[]}},regionTreeData:{type:Object,default:function(){return{}}},allCountryData:{type:Object,default:function(){return{}}},allRegionData:{type:Object,default:function(){return{}}},hasLoadMap:{type:Boolean,default:!1},mapType:String,getRegionInfoByLngLat:{type:Function,default:function(){}}},data:function(){return{formData:{countryCode:"",regionCode:[],detailAddress:{},parseAddress:""}}},watch:{value:{handler:function(e){this.formData=JSON.parse(JSON.stringify(e))},immediate:!0,deep:!0}},computed:{countryCodeArr:function(){return this.$attrs.countryMultiple?this.formData.countryCode:this.formData.countryCode?[this.formData.countryCode]:[]}},methods:{handleClose:function(){this.$emit("close",!1)},handleConfirm:function(){this.$attrs.loading[this.formData.countryCode]||this.$emit("confirm",this.formData)},handleSelectAddress:function(e,t){var n=this;return d(s().mark((function r(){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n.$emit("selectAddress",e,t,n.formData);case 1:case"end":return r.stop()}}),r)})))()}},render:function(){var e,t=this,n=arguments[0];return n("div",[n("van-popup",{attrs:{position:"bottom","overlay-style":{"background-color":"#F5F7FA"}},style:{height:"100%"},class:[ct({mb:this.$attrs.isPhone,pc:!this.$attrs.isPhone}),"hx-address-flexall"],model:{value:t.visible,callback:function(e){t.visible=e}}},[n("van-form",{class:"hx-address-flex"},[this.$scopedSlots.top?this.$scopedSlots.top(this.formData):"",n(it,{attrs:o({countryData:this.countryData,allCountryData:this.allCountryData},this.$attrs),on:{change:function(e,n){t.formData.detailAddress={},t.$emit("changeCountry",e)}},model:{value:t.formData.countryCode,callback:function(e){t.$set(t.formData,"countryCode",e)}}}),null!==(e=this.countryCodeArr)&&void 0!==e&&e.length?this.countryCodeArr.map((function(e){var r;return n(st,{style:{display:t.$attrs.loading[e]||null!==(r=t.regionTreeData[e])&&void 0!==r&&r.length?"flex":"none"},attrs:o({countryCode:e,regionData:t.regionTreeData[e]||[],allRegionData:t.allRegionData},t.$attrs),on:o({},{changeRegion:function(e){t.$emit("changeRegion",t.formData.countryCode,e)}}),model:{value:t.formData["regionCode-".concat(e)],callback:function(n){t.$set(t.formData,"regionCode-".concat(e),n)}}})})):n("van-field",{attrs:{"is-link":!0,readonly:!0,label:$hxt_address({key:"92d814-Region",desc:"区域"}),placeholder:$hxt_address({key:"92d814-PleaseSelect",desc:"请选择"})},on:{click:function(){t.formData.countryCode||he.error($hxt_address({key:"92d814-PleaseSelectACountryregionFirst",desc:"请先选择国家/地区"}))}}}),this.$attrs.showDetail?n(ut,{ref:"autocomplete",attrs:o({},o(o({},this.$attrs),{},{mapType:this.mapType})),on:{mapHandlerClick:function(){t.$refs.mapDialog.open()},input:function(e){if(t.isClickListItem)t.isClickListItem=!1;else{var n=t.formData.detailAddress.fullAddress;t.formData.detailAddress={fullAddress:n}}},blur:function(){if(t.$attrs.needLngLat){var e=t.formData.detailAddress,n=e.location;e.fullAddress&&!n&&(t.formData.detailAddress={})}},select:function(e){t.isClickListItem=!0,t.handleSelectAddress(e)}},model:{value:t.formData.detailAddress,callback:function(e){t.$set(t.formData,"detailAddress",e)}}}):"",this.$attrs.showAddressParse?n("van-field",{class:"parse-field",attrs:{name:"parseAddress",label:$hxt_address({key:"ee0fb5-AddressLink",desc:"地址链接"}),clearable:!0,autocomplete:"off",placeholder:$hxt_address({key:"ee0fb5-PleaseEnter",desc:"请输入"})},scopedSlots:{button:function(){return t.$attrs.loading.parseAddress?n("van-loading",{attrs:{color:"var(--hx-primary-color)"}}):n("div",{style:{color:t.formData.parseAddress?"var(--hx-primary-color)":"#969799"},on:{click:t.$attrs.parseAddress.bind(t,t.formData)}},[$hxt_address({key:"ee0fb5-Analysis",desc:"解析"})])}},model:{value:t.formData.parseAddress,callback:function(e){t.$set(t.formData,"parseAddress",e)}}}):"",this.$attrs.showMap&&n("div",{on:{click:function(){t.$refs.mapDialog.open()}}},[n(Qe,{ref:"map",style:"height:auto;",attrs:{disabled:!0,mapCenter:this.$attrs.mapCenter,hasLoadMap:this.hasLoadMap,mapType:this.mapType,language:this.$attrs.language,loading:this.$attrs.loading,isPhone:this.$attrs.isPhone,updateCurLocationInMapCenter:this.$attrs.updateCurLocationInMapCenter},model:{value:t.formData,callback:function(e){t.formData=e}}})])]),n("div",{class:"footer-btn"},[n("div",{attrs:{round:!0,"native-type":"button"},class:"left",on:{click:this.handleClose}},[$hxt_address({key:"92d814-Cancel",desc:"取消"})]),n("div",{attrs:{round:!0,type:"info","native-type":"button",loading:this.$attrs.loading[this.formData.countryCode]},class:"right",on:{click:this.handleConfirm}},[this.$attrs.loading[this.formData.countryCode]?n("van-loading",{style:{float:"none",display:"inline-block",transform:"scale(0.7)"}}):"",$hxt_address({key:"92d814-Preserve",desc:"保存"})])])]),this.$attrs.showMap&&n(qe,{ref:"mapDialog",attrs:{searchAddress:this.$attrs.searchAddress,hasLoadMap:this.hasLoadMap,mapType:this.mapType,updateCurLocationInMapCenter:this.$attrs.updateCurLocationInMapCenter,loading:this.$attrs.loading,getCountryEnCodeByCountryCode:this.$attrs.getCountryEnCodeByCountryCode,mapCenter:this.$attrs.mapCenter,isPhone:this.$attrs.isPhone,language:this.$attrs.language},on:{select:function(e,n){t.handleSelectAddress(e,n)}},model:{value:t.formData,callback:function(e){t.formData=e}}})])}},ht={},pt={components:{AddressPC:et,AddressMB:F({},undefined,dt,undefined,undefined,undefined,!1,void 0,void 0,void 0)},props:{name:String,visible:{type:Boolean,default:!1},value:{type:Object,default:function(){return{}}},countryMultiple:{type:Boolean,default:!1},regionMultiple:{type:Boolean,default:!1},checkStrictly:{type:Boolean,default:!1},collapseTags:{type:Boolean,default:!0},mapLoader:{type:Function},version:{type:String},showDetail:{type:Boolean,default:!1},showMap:{type:Boolean,default:!1},needLngLat:{type:Boolean,default:!0},regionLevel:{type:Number|Object,default:0},detailAddressRequired:{type:Boolean,default:!1},openapi:{type:Boolean,default:!1},beforeConfirm:{type:Function},title:{type:String,default:function(){return $hxt_address({key:"ee0fb5-AddressSelection",desc:"地址选择"})}},canToogleMap:{type:Boolean,default:!0},filterCountryOptions:{type:Function},showAddressParse:{type:Boolean,default:!0},browser:{type:String,default:function(){return L()?"phone":"pc"}},forceMap:{type:Object,default:function(){return{amap:[],google:[]}}}},data:function(){return{countryData:[],regionTreeData:{},loading:{country:!1,detail:!1,curlocation:!1,parseAddress:!1},allRegionData:{},allCountryData:{},enCountryObj:{},mapKey:{country:{labelKey:"regionName",valueKey:"regionCode",enKey:"countryCode"},region:{labelKey:"regionName",valueKey:"regionCode",childrenKey:"children"}},formData:{countryCode:"",detailAddress:{}},defaultCountryInfo:{},hasLoadMapamap:!1,hasLoadMapgoogle:!1,autoPlaceSearch:null,autoCompleteSearch:null,mapType:"amap",mapCenter:"",newConfig:{}}},computed:{isPhone:function(){return"phone"===this.browser},isNeedMap:function(){return!(!this.mergedAttrs.showDetail&&!this.mergedAttrs.showMap)},hasLoadMap:function(){return this["hasLoadMap".concat(this.mapType)]},mergedAttrs:function(){return o(o({},this.$props),this.newConfig)}},created:function(){this.validateComponentProps()},watch:{value:{handler:function(e,t){this.isClickConfirm?this.isClickConfirm=!1:this.formatVModelToFormData(e)},deep:!0,immediate:!0},visible:{handler:function(e){var t=this;e?setTimeout(d(s().mark((function e(){var n,r,a,i,o,l,u,c,d,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.value,r=n.componentConfig,a=n.fullPath,!r){e.next=5;break}e.next=24;break;case 5:return e.next=8,t.getCountryData();case 8:if(null!=a&&a.length){e.next=19;break}return e.next=11,t.getLocationInfo(!0);case 11:t.defaultCountryInfo=e.sent,i=t.defaultCountryInfo,o=i.countryCode,l=i.countryEnCode,u=i.locationStr,t.formData.countryCode=o,u&&(t.mapCenter=u),t.useMap({countryEnCode:l}),t.getRegionData(o),e.next=24;break;case 19:d=a[0][0],(h=null===(c=t.allCountryData[d])||void 0===c?void 0:c.center)&&(t.mapCenter=h),t.useMap({countryCode:d}),t.getRegionData(d);case 24:case"end":return e.stop()}}),e)}))),0):this.formatVModelToFormData(this.value)},immediate:!0}},methods:{validateComponentProps:function(){return this.mergedAttrs.regionMultiple&&(this.mergedAttrs.showMap||this.mergedAttrs.showDetail)?(console.error("regionMultiple为true时，showMap和showDetail必须为false"),!1):((this.mergedAttrs.showMap||this.mergedAttrs.showDetail)&&this.mergedAttrs.checkStrictly&&console.error("showMap或showDetail为true时，checkStrictly必须为false"),!0)},updatePlaceSearchConfig:function(e,t){var n=this;"amap"===this.mapType&&this.autoPlaceSearch&&(this.mergedAttrs.regionMultiple||(this.placeSearchTimer&&clearTimeout(this.placeSearchTimer),this.placeSearchTimer=setTimeout((function(){e=e||n.formData.countryCode,t=t||n.formData["regionCode-".concat(e)];var r=void 0;if(n.allCountryData[e]){var a,i=n.getCountryEnCodeByCountryCode(e),o=n.allCountryData[e][n.mapKey.country.labelKey];if(r=D(i)?void 0:M(i)?o.replace("中国",""):o,null!==(a=t)&&void 0!==a&&a.length){var s;if(!n.allRegionData[e])return;var l=null===(s=n.allCountryData[e])||void 0===s?void 0:s.regionLevel,u=!l||n.mergedAttrs.regionMultiple||n.mergedAttrs.checkStrictly?t.length-1:l-1,c=n.allRegionData[e][t[u]].fullName,d=n.getCountryEnCodeByCountryCode(e);D(d)?r=T({regionCode:t[0],regionName:c[0]})?c[0]:c[1]:M(d)||(r=c[0])}}n.changeLanguage({countryCode:e}),n.autoPlaceSearch.setCity(r),n.autoCompleteSearch.setCity(r),n.autoPlaceSearch.setLang(n.language),n.autoCompleteSearch.setLang(n.language)}),10)))},getCountryData:function(){var e=this;return d(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=d(s().mark((function t(n,r){var a,i;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.countryData.length){t.next=2;break}return t.abrupt("return",n(!0));case 2:return e.loading.country=!0,t.prev=3,t.next=6,Re({baseURL:k(e.mergedAttrs.openapi),url:je(e.mergedAttrs.openapi).queryRegionByZeroLevel});case 6:a=t.sent,i=a.data,e.countryData=e.mergedAttrs.filterCountryOptions?e.mergedAttrs.filterCountryOptions(i||[]):i||[],e.updateCountryRegionLevel(),e.loading.country=!1,n(!0),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(3),console.error(t.t0),e.loading.country=!1,r(!1);case 19:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},updateCountryRegionLevel:function(){var e=this;this.countryData.forEach((function(t){var n=t.longitude,r=t.latitude;t.countryCode,n&&r&&(t.center="".concat(n,",").concat(r));var a=t[e.mapKey.country.enKey],i="object"===u(e.mergedAttrs.regionLevel)?e.mergedAttrs.regionLevel[a]||0:e.mergedAttrs.regionLevel;e.allCountryData[t[e.mapKey.country.valueKey]]=o(o({},t),{},{regionLevel:i}),e.enCountryObj[a]=f(f({},e.mapKey.country.valueKey,t[e.mapKey.country.valueKey]),"regionLevel",i)}))},getRegionData:function(e){var t=arguments,n=this;return d(s().mark((function r(){var a,i,o,l,u,c,d,h;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t.length>1&&void 0!==t[1]&&t[1],i=(t.length>2?t[2]:void 0)||n.getCountryEnCodeByCountryCode(e)){r.next=6;break}return r.abrupt("return");case 6:if(!n.loading[e]){r.next=8;break}return r.abrupt("return");case 8:if(n.$set(n.loading,e,!0),a&&n.$set(n.regionTreeData,e,[]),!n.allRegionData[e]){r.next=14;break}return n.regionTimer&&clearTimeout(n.regionTimer),a?n.regionTimer=setTimeout((function(){n.updateRegionData(e)}),50):n.updateRegionData(e),r.abrupt("return");case 14:return r.prev=14,r.next=17,Re({baseURL:k(n.mergedAttrs.openapi),url:je(n.mergedAttrs.openapi).queryRegionTree,data:{countryCode:i,version:n.version}});case 17:l=r.sent,u=l.data,c=null!==(o=u[0])&&void 0!==o&&null!==(o=o.children)&&void 0!==o&&o.length?u[0].children:[],d=n.formatTree(c||[],e),ht[e]=d.treeData,h=Object.freeze(d.allRegionData),n.$set(n.allRegionData,e,h),n.updateRegionData(e),r.next=31;break;case 27:r.prev=27,r.t0=r.catch(14),console.error(r.t0),n.$set(n.loading,e,!1);case 31:case"end":return r.stop()}}),r,null,[[14,27]])})))()},updateRegionData:function(e){var t=this;this.updateRegionDataTimer&&clearTimeout(this.updateRegionDataTimer),this.updateRegionDataTimer=setTimeout((function(){t.$set(t.regionTreeData,e,ht[e]),t.updatePlaceSearchConfig(e),t.$set(t.loading,e,!1)}),50)},getCountryEnCodeByCountryCode:function(e){return this.allCountryData[e]&&this.allCountryData[e][this.mapKey.country.enKey]},formatTree:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e.forEach((function(e){var i,o,s=null===(i=n.allCountryData[t])||void 0===i?void 0:i.regionLevel;s&&e.level===s&&(e[n.mapKey.region.childrenKey]=void 0);var l=r.fullPath,u=void 0===l?[]:l,c=r.fullName,d=void 0===c?[]:c,h=r.fullNode,p=void 0===h?[]:h;e.fullPath=u.concat(e[n.mapKey.region.valueKey]),e.fullName=d.concat(e[n.mapKey.region.labelKey]),e.fullNode=p.concat(e),a[e[n.mapKey.region.valueKey]]={fullPath:e.fullPath,fullName:e.fullName,isLeaf:null===(o=e.fullNode[e.fullNode.length-1][n.mapKey.region.childrenKey])||void 0===o||!o.length},e[n.mapKey.region.childrenKey]&&e[n.mapKey.region.childrenKey].length>0?n.formatTree(e[n.mapKey.region.childrenKey],t,e,a):(e.leaf=!0,e[n.mapKey.region.childrenKey]=void 0)})),{allRegionData:a,treeData:e}},isEndRegionCode:function(e,t){var n;return t?this.allRegionData[e][t].isLeaf:null===(n=this.regionTreeData[e])||void 0===n||!n.length},formatFormDataToVModel:function(e){var t,n,r=this,a={countryEnCode:this.getCountryEnCodeByCountryCode(e.countryCode),fullPath:[],fullName:[],detailAddress:e.detailAddress,componentId:e.componentId,componentConfig:e.componentConfig,parseAddress:e.parseAddress,endPath:[]};Object.keys(e).forEach((function(t){if(t.indexOf("regionCode-")>-1){var n=r.mergedAttrs.countryMultiple?e.countryCode:[e.countryCode],i=t.split("-")[1];if(-1===n.indexOf(i))return;var o=r.allCountryData[i][r.mapKey.country.labelKey],s=e[t];r.mergedAttrs.regionMultiple&&null!=s&&s.length?s.forEach((function(e){r.getFullDataByCode(a,{regionCode:e,countryCode:i,countryName:o})})):r.getFullDataByCode(a,{regionCode:s,countryCode:i,countryName:o})}})),this.mergedAttrs.regionMultiple?a.endPath=a.fullPath.map((function(e){return e[e.length-1]})):a.endPath=a.fullPath[0][a.fullPath[0].length-1];var i=a.fullPath,o=i[0][0],s=i[0].slice(1);if(null!=s&&s.length||null===(t=this.regionTreeData[o])||void 0===t||!t.length)if(this.mergedAttrs.regionMultiple||this.mergedAttrs.checkStrictly||this.isEndRegionCode(o,s[s.length-1]))if(!this.mergedAttrs.showDetail||null!==(n=a.detailAddress)&&void 0!==n&&n.fullAddress||!this.mergedAttrs.detailAddressRequired){if(this.mergedAttrs.beforeConfirm)return new Promise((function(e){r.mergedAttrs.beforeConfirm(a,e)})).then((function(){r.$emit("update:visible",!1),r.$emit("input",a),r.$emit("confirm",a)}));this.$emit("update:visible",!1),this.$emit("input",a),this.$emit("confirm",a)}else he.error($hxt_address({key:"be9a31-TheDetailedAddressCannotBeEmpty",desc:"详细地址不能为空"}));else he.error($hxt_address({key:"be9a31-TheRegionIsIncompletePleaseImproveTheRegionInformation",desc:"区域不完整,请完善区域信息"}));else he.error($hxt_address({key:"be9a31-TheRegionIsIncompletePleaseImproveTheRegionInformation",desc:"区域不完整,请完善区域信息"}))},formatVModelToFormData:function(){var e=arguments,t=this;return d(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.length>0&&void 0!==e[0]?e[0]:{},t.preventTimer&&clearTimeout(t.preventTimer),t.preventTimer=setTimeout(d(s().mark((function e(){var n,a,i,l,u,c,d,h,p,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.visible,!e.t0){e.next=4;break}return e.next=4,t.getCountryData();case 4:if(n={countryCode:t.mergedAttrs.countryMultiple?[]:"",detailAddress:r.detailAddress||{},componentId:r.componentId,parseAddress:r.parseAddress},r.componentConfig&&t.mergeConfig(r.componentConfig||{}),a=r.fullPath,!(i=void 0===a?[]:a).length){e.next=16;break}t.pageMode="edit",l=[],i.forEach((function(e,r){var a=e[0],i=e.slice(1);l.push(i),n["regionCode-".concat(a)]=t.mergedAttrs.regionMultiple?l:l[0],t.mergedAttrs.countryMultiple?n.countryCode.push(a):n.countryCode=a})),t.visible&&((c=null===(u=t.allCountryData[n.countryCode])||void 0===u?void 0:u.center)&&(t.mapCenter=c),t.useMap({countryCode:n.countryCode}),t.getRegionData(n.countryCode)),t.formData=o({},n),e.next=24;break;case 16:if(t.visible){e.next=18;break}return e.abrupt("return");case 18:return t.pageMode="add",e.next=21,t.getLocationInfo(!0);case 21:t.defaultCountryInfo=e.sent,"add"===t.pageMode&&(d=t.defaultCountryInfo,h=d.countryCode,p=d.countryEnCode,f=d.locationStr,n.countryCode=h,f&&(t.mapCenter=f),t.useMap({countryEnCode:p}),t.getRegionData(h),t.formData=o({},n));case 24:case"end":return e.stop()}}),e)}))),10);case 3:case"end":return n.stop()}}),n)})))()},getFullDataByCode:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.regionCode,r=void 0===n?[]:n,a=t.countryCode,i=t.countryName,o=[];r.length>0&&this.allRegionData[a]&&(o=this.allRegionData[a][r[r.length-1]].fullName),e.fullPath.push([a].concat(r)),e.fullName.push([i].concat(o))},searchAddress:function(e){var t=this;return d(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.autoCompleteSearch||"amap"!==t.mapType){n.next=2;break}return n.abrupt("return",[]);case 2:return t.$set(t.loading,"detail",!0),n.abrupt("return",new Promise(function(){var n=d(s().mark((function n(r){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{t.timer&&clearTimeout(t.timer),t.timer=setTimeout(d(s().mark((function n(){var a,i,l,u,c,d,h,p,f;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("google"!==t.mapType){n.next=20;break}return n.prev=1,a=t.mapCenter,i=a.split(","),l=g(i,2),u=l[0],c=l[1],d={languageCode:t.language,locationBias:{circle:{center:{latitude:c,longitude:u},radius:500}},textQuery:e},n.next=7,Re({baseURL:k(t.mergedAttrs.openapi),url:je(t.mergedAttrs.openapi).queryText,data:{fields:"places.displayName,places.formattedAddress,places.location",jsonBody:JSON.stringify(d)}});case 7:h=n.sent,p=h.data?JSON.parse(h.data):{},f=(p.places||[]).map((function(e){var t;return{name:(null===(t=e.displayName)||void 0===t?void 0:t.text)||"",address:e.formattedAddress||"",location:"".concat(e.location.longitude,",").concat(e.location.latitude)}})),t.$set(t.loading,"detail",!1),r(f),n.next=18;break;case 14:n.prev=14,n.t0=n.catch(1),t.$set(t.loading,"detail",!1),r([]);case 18:n.next=21;break;case 20:t.autoCompleteSearch.search(e,(function(e,n){if(t.$set(t.loading,"detail",!1),"complete"===e&&"OK"===n.info){var a=[];(n.tips||[]).forEach((function(e){e.location&&a.push(o(o({},e),{},{location:"".concat(e.location.lng,",").concat(e.location.lat),address:"string"==typeof e.address?e.address:""}))})),r(a)}else r([])}));case 21:case"end":return n.stop()}}),n,null,[[1,14]])}))),300)}catch(e){r([]),t.$set(t.loading,"detail",!1)}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()));case 4:case"end":return n.stop()}}),n)})))()},getRegionInfoByLngLat:function(e){var t=this;return d(s().mark((function n(){var r,a,i,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.split(","),a=g(r,2),i=a[0],o=a[1],n.abrupt("return",new Promise(function(){var e=d(s().mark((function e(n){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.$set(t.loading,"detail",!0),e.next=4,Re({baseURL:k(t.mergedAttrs.openapi),url:je(t.mergedAttrs.openapi).queryRegionInfoByLngLat,noErrorMsg:!0,data:{lng:i,lat:o}});case 4:r=e.sent,a=r.data,t.$set(t.loading,"detail",!1),n(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),n({}),t.$set(t.loading,"detail",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return n.stop()}}),n)})))()},getLocation:function(){var e=this;return new Promise((function(t,n){e.loading.curlocation=!0,window.isApp?hx.ready((function(){hx.getLocation({success:function(n){var r=n.lng,a=n.lat;e.loading.curlocation=!1,t("".concat(r,",").concat(a))},fail:function(n){e.$toast($hxt_address({key:"76b219-PositioningFailedPleaseTryAgain",desc:"定位失败,请重试"})),e.loading.curlocation=!1,t()}})})):(e.loading.curlocation=!1,t())}))},getLocationInfo:function(){var e=arguments,t=this;return d(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]&&e[0],n.abrupt("return",new Promise(function(){var e=d(s().mark((function e(n){var a,i,o,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.defaultCountryInfo.countryCode){e.next=2;break}return e.abrupt("return",n(t.defaultCountryInfo));case 2:return e.prev=2,e.next=5,t.getLocation();case 5:if(!(a=e.sent)){e.next=21;break}return t.loading.country=!0,r&&(t.loading.curlocation=!0),e.next=11,t.getRegionInfoByLngLat(a);case 11:if(e.t0=e.sent,e.t0){e.next=14;break}e.t0={};case 14:(i=e.t0).fullPath&&(i.countryEnCode=i.countryCode,i.countryCode=i.fullPath.split("/")[0],i.locationStr=a),t.loading.country=!1,t.loading.curlocation=!1,n(i),e.next=32;break;case 21:return e.prev=21,e.next=24,Re({baseURL:k(t.mergedAttrs.openapi),url:je(t.mergedAttrs.openapi).queryRegionByZeroLevelByCurrentUser,noErrorMsg:!0});case 24:o=e.sent,l=o.data,n(l?{countryCode:l.regionCode,countryEnCode:l.countryCode,locationStr:l.longitude&&l.latitude?"".concat(l.longitude,",").concat(l.latitude):""}:{}),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(21),n({});case 32:e.next=38;break;case 34:e.prev=34,e.t2=e.catch(2),t.loading.country=!1,t.loading.curlocation=!1;case 38:case"end":return e.stop()}}),e,null,[[2,34],[21,29]])})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return n.stop()}}),n)})))()},changeCountry:function(e){this.isNeedMap&&(this.mapCenter=this.allCountryData[e].center,this.useMap({countryCode:e})),this.getRegionData(e,!0)},changeRegion:function(e,t){this.updatePlaceSearchConfig(e,t)},changeLanguage:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.countryCode,r=t.countryEnCode||this.getCountryEnCodeByCountryCode(n);e=D(r)||M(r)?"google"===this.mapType?"zh-CN":"zh_cn":"en","amap"===this.mapType&&"zh_cn"!==e&&(e="en"),this.language=e},useMap:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.countryCode,n=e.countryEnCode;if(this.isNeedMap){if(this.canToogleMap){var r=n||this.getCountryEnCodeByCountryCode(t);for(var a in this.mapType=M(r)||"CN"===r?"amap":"google",this.forceMap){if((this.forceMap[a]||[]).indexOf(r)>-1){this.mapType=a;break}}}else this.mapType="amap";this.changeLanguage({countryCode:t,countryEnCode:n}),this.loadMap(t)}},loadMap:function(e){var t=this;return d(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.hasLoadMap){n.next=4;break}return console.warn("地图已加载"),t.updatePlaceSearchConfig(e),n.abrupt("return");case 4:return n.next=6,be(t.mapType,t.mergedAttrs.mapLoader);case 6:return"google"===t.mapType?t.hasLoadMapamap=!1:"amap"===t.mapType&&(t.hasLoadMapgoogle=!1),t["hasLoadMap".concat(t.mapType)]=!0,n.next=10,Ce(t.mapType);case 10:r=n.sent,"amap"===t.mapType&&(t.autoPlaceSearch=new r({pageSize:20,pageIndex:1,children:1,lang:t.language}),t.autoCompleteSearch=new AMap.Autocomplete({datatype:"all",lang:t.language}),t.updatePlaceSearchConfig(e));case 12:case"end":return n.stop()}}),n)})))()},updateCurLocationInMapCenter:function(e){var t=this;return d(s().mark((function n(){var r,a,i,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e&&(t.loading.curlocation=!0),t.defaultCountryInfo={},n.next=4,t.getLocationInfo(!0);case 4:t.defaultCountryInfo=n.sent,r=t.defaultCountryInfo,a=r.countryCode,i=r.countryEnCode,o=r.locationStr,t.formData.countryCode=a,t.$refs.wrapper&&(t.$refs.wrapper.formData.countryCode=a,t.$refs.wrapper.formData["regionCode-".concat(a)]=[],t.$refs.wrapper.formData.detailAddress={}),o&&(t.mapCenter=o),t.useMap({countryEnCode:i}),t.getRegionData(a);case 11:case"end":return n.stop()}}),n)})))()},handleSelectAddress:function(e,t,n){var r=this;return d(s().mark((function a(){var i,o,l,u,c,d,h,p,f,g,m,y;return s().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=e.name,o=e.location,l=e.fullAddress,n.detailAddress={name:i,fullAddress:l,location:o},t&&t(),r.loading.country=!0,r.loading[n.countryCode]=!0,a.next=8,r.getRegionInfoByLngLat(o);case 8:u=a.sent,d=(c=u||{}).fullPath,h=c.fullName,d&&(f=d.split("/"),h.split("/"),n.countryCode!==f[0]&&(n.countryCode=f[0],r.changeCountry(n.countryCode)),g="regionCode-".concat(n.countryCode),m=null===(p=r.allCountryData[n.countryCode])||void 0===p?void 0:p.regionLevel,y=m?m+1:f.length,r.$set(n,g,f.slice(1,y)),r.changeRegion(n.countryCode,n[g])),r.loading.country=!1,r.loading[n.countryCode]=!1;case 13:case"end":return a.stop()}}),a)})))()},mergeConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.newConfig=JSON.parse(JSON.stringify(e)),this.validateComponentProps(),this.updateCountryRegionLevel()},focusDetailAddressInput:function(){this.$refs.wrapper.$refs.autocomplete.focus()},parseAddress:function(e){var t=this;return d(s().mark((function n(){var r,a,i,o,l,u,c,d,h,p,f,g,m,y,v,b,C;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.parseAddress){n.next=3;break}return n.abrupt("return");case 3:if(a=r.includes("amap"),i=r.includes("app.goo"),("amap"!==t.mapType||a)&&("google"!==t.mapType||i)){n.next=11;break}return o={amap:{key:"1091b7-PleaseEnterTheLinkOfGaodeMap",desc:"请输入高德地图的链接"},google:{key:"1091b7-PleaseEnterTheLinkOfGoogleMaps",desc:"请输入谷歌地图的链接"}}[t.mapType]||{key:"1091b7-PleaseEnterTheCorrectAddressLink",desc:"请输入正确的地址链接"},function(e){he.error($hxt_address(e))}(o),n.abrupt("return");case 11:return t.loading.parseAddress=!0,n.prev=12,n.next=15,Re({baseURL:k(t.mergedAttrs.openapi),url:je(t.mergedAttrs.openapi).queryRegionInfoByShortUrl,data:{shortUrl:r}});case 15:l=n.sent,u=l.data,d=(c=u||{}).address,h=c.lng,p=c.lat,f=c.fullPath,g=c.countryCode,m=c.fullName,y=f.split("/")[0],"CN"===g&&(v=m.split("/").slice(1),b=f.split("/").slice(1),C=v.filter((function(e,t){return!T({regionCode:b[0],regionName:v[0]})||1!==t})),d=d.replace(C.join(""),"")),e.countryCode!=y&&(e.countryCode=y,t.changeCountry(e.countryCode)),t.handleSelectAddress({fullAddress:d,location:"".concat(h,",").concat(p)},null,e),t.loading.parseAddress=!1,n.next=29;break;case 25:n.prev=25,n.t0=n.catch(12),t.loading.parseAddress=!1;case 29:case"end":return n.stop()}}),n,null,[[12,25]])})))()}},render:function(){var e=this,t=arguments[0],n=o(o({},this.mergedAttrs),{},{countryData:this.countryData,regionTreeData:this.regionTreeData,allRegionData:this.allRegionData,allCountryData:this.allCountryData,searchAddress:this.searchAddress,loading:this.loading,mapKey:this.mapKey,hasLoadMap:this.hasLoadMap,mapType:this.mapType,getCountryEnCodeByCountryCode:this.getCountryEnCodeByCountryCode,getRegionInfoByLngLat:this.getRegionInfoByLngLat,mapCenter:this.mapCenter,isEndRegionCode:this.isEndRegionCode,language:this.language,updateCurLocationInMapCenter:this.updateCurLocationInMapCenter,parseAddress:this.parseAddress,isPhone:this.isPhone});delete n.value;var r={confirm:function(t){e.isClickConfirm=!0,t.hasOwnProperty("regionCode-".concat(t.countryCode))||(t["regionCode-".concat(t.countryCode)]=[]),e.formatFormDataToVModel(t)},close:function(){e.$emit("update:visible",!1),e.$emit("cancel",!1)},changeCountry:function(t){e.changeCountry(t)},changeRegion:function(t,n){e.changeRegion(t,n)},selectAddress:function(t,n,r){e.handleSelectAddress(t,n,r)}},a=Object.assign({},this.$attrs,n),i=Object.assign({},this.$listeners,r);return t("Address".concat(this.isPhone?"MB":"PC"),{attrs:o({},a),on:o({},i),ref:"wrapper",scopedSlots:this.$scopedSlots,model:{value:e.formData,callback:function(t){e.formData=t}}})}},ft=F({},undefined,pt,undefined,undefined,undefined,!1,void 0,void 0,void 0),gt=K("address-handler"),mt={props:{value:{type:Object|Array,default:function(){return{}}},dialogFormData:{type:Object,default:function(){return{}}},keyMap:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},dataType:{type:String,default:"string"},size:{type:String,default:"medium"},placeholder:{type:String,default:""},beforeOpen:{type:Function},browser:{type:String,default:function(){return L()?"phone":"pc"}}},data:function(){return{inputValue:"",fullPathArr:[],componentId:-1}},computed:{isPhone:function(){return"phone"===this.browser},inputType:function(){return this.mergedAttrs.regionMultiple?"textarea":"text"},inputDataType:function(){return this.dataType},mergedKeyMap:function(){return o({label:"fullName",value:"fullPath",endValue:"endPath",detailAddress:"fullAddress",lng:"lng",lat:"lat",location:"location",parseAddress:"parseAddress"},this.keyMap)},mergedAttrs:function(){var e={};for(var t in this.$attrs)""===this.$attrs[t]?e[t]=!0:e[t]=this.$attrs[t];return e},isShowClear:function(){return this.inputValue.replace(/\s*/g,"").length&&!this.disabled}},watch:{dialogFormData:{handler:function(e){this.formatDialogFormDataToVModel()},deep:!0},value:{handler:function(e){var t=this.formatVModelToInputValue(e),n=t.fullNameStr,r=t.detailAddress;this.inputValue=n+""+(r.fullAddress||"")},deep:!0,immediate:!0}},created:function(){this.componentId=this._uid},methods:{showDialog:function(){var e=this;if(!this.disabled)return"function"==typeof this.beforeOpen?new Promise((function(t,n){e.beforeOpen(t)})).then((function(){e.showDialogAfter()})):void this.showDialogAfter()},showDialogAfter:function(){var e=this;this.$emit("update:visible",!0),setTimeout((function(){var t=e.formatVModelToInputValue();t.fullNameStr;var n=t.fullNameArr,r=t.fullPathArr,a=t.detailAddress,i=t.parseAddress,s=o(o({},e.dialogFormData),{},{fullPath:e.mergedAttrs.regionMultiple?r:null!=r&&r.length?[r]:[],fullName:e.mergedAttrs.regionMultiple?n:null!=n&&n.length?[n]:[],detailAddress:a,componentId:e.componentId,componentConfig:e.mergedAttrs,parseAddress:i});e.$emit("update:dialogFormData",s)}),0)},formatVModelToInputValue:function(){var e=this;if("arrayObjectString"===this.inputDataType||"arrayObjectArray"===this.inputDataType){var t,n="",r=[],a=[];return null!==(t=this.value)&&void 0!==t&&t.length&&this.value.forEach((function(t){var i=t[e.mergedKeyMap.label],o=t[e.mergedKeyMap.value];"arrayObjectString"===e.inputDataType?(n+=i+"\n",r.push(i.split("/")),a.push(null==o?void 0:o.split("/"))):"arrayObjectArray"===e.inputDataType&&(n+=i.join("/")+"\n",r.push(i),a.push(o))})),{fullNameStr:n=n.slice(0,n.length-1),fullNameArr:r,fullPathArr:a,detailAddress:{}}}var i=this.value[this.mergedKeyMap.label],o=this.value[this.mergedKeyMap.value],s="",l=[],u=[];null!=i&&i.length&&(this.mergedAttrs.regionMultiple?(i.forEach((function(t,n){var r;"string"===e.inputDataType?(s+=t+"\n",l.push(t.split("/")),u.push(null===(r=o[n])||void 0===r?void 0:r.split("/"))):"array"===e.inputDataType&&(s+=t.join("/")+"\n",l.push(t),u.push(o[n]))})),s=s.slice(0,s.length-1)):"string"===this.inputDataType?(s=i,l=i.split("/"),u=null==o?void 0:o.split("/")):"array"===this.inputDataType&&(s=i.join("/"),l=i,u=o));var c=this.value[this.mergedKeyMap.detailAddress],d=this.value[this.mergedKeyMap.location],h=this.value[this.mergedKeyMap.lng],p=this.value[this.mergedKeyMap.lat];return d=d||(h&&p?"".concat(h,",").concat(p):""),{fullNameStr:s,fullNameArr:l,fullPathArr:u,detailAddress:{fullAddress:c,location:d},parseAddress:this.value[this.mergedKeyMap.parseAddress]}},formatDialogFormDataToVModel:function(){var e=this,t=this.dialogFormData,n=t.fullPath,r=t.fullName;t.endValue;var a=t.componentId,i=t.detailAddress,s=t.parseAddress;if(this.componentId===a){var l={},u=[];if(this.mergedAttrs.regionMultiple){if(null==r||!r.length)return;var c=[],d=[],h=[];r.forEach((function(t,r){if("arrayObjectString"===e.inputDataType||"arrayObjectArray"===e.inputDataType){var a,i,o,s;if("arrayObjectString"===e.inputDataType)u.push(f(f(f({},e.mergedKeyMap.label,null!=t&&t.length?t.join("/"):""),e.mergedKeyMap.value,null!==(a=n[r])&&void 0!==a&&a.length?n[r].join("/"):""),e.mergedKeyMap.endValue,null!==(i=n[r])&&void 0!==i&&i.length?n[r].slice(-1)[0]:""));else u.push(f(f(f({},e.mergedKeyMap.label,null!=t&&t.length?t:[]),e.mergedKeyMap.value,null!==(o=n[r])&&void 0!==o&&o.length?n[r]:[]),e.mergedKeyMap.endValue,null!==(s=n[r])&&void 0!==s&&s.length?n[r].slice(-1)[0]:""))}else{var l,p;if("string"===e.inputDataType)c.push(null!=t&&t.length?t.join("/"):""),d.push(null!==(p=n[r])&&void 0!==p&&p.length?n[r].join("/"):"");else if("array"===e.inputDataType){var g;c.push(null!=t&&t.length?t:[]),d.push(null!==(g=n[r])&&void 0!==g&&g.length?n[r]:[])}h.push(null!==(l=n[r])&&void 0!==l&&l.length?n[r].slice(-1)[0]:"")}})),"string"!==this.inputDataType&&"array"!==this.inputDataType||(l=f(f(f({},this.mergedKeyMap.label,c),this.mergedKeyMap.value,d),this.mergedKeyMap.endValue,h))}else{var p,g;"string"===this.inputDataType?l=f(f({},this.mergedKeyMap.label,null!=r&&r.length?r[0].join("/"):""),this.mergedKeyMap.value,null!=n&&n.length?n[0].join("/"):""):"array"===this.inputDataType&&(l=f(f({},this.mergedKeyMap.label,null!=r&&r.length?r[0]:[]),this.mergedKeyMap.value,null!=n&&n.length?n[0]:[])),l=o(o({},l),{},f(f(f(f(f({},this.mergedKeyMap.detailAddress,i.fullAddress),this.mergedKeyMap.lng,(null===(p=i.location)||void 0===p?void 0:p.split(",")[0])||""),this.mergedKeyMap.lat,(null===(g=i.location)||void 0===g?void 0:g.split(",")[1])||""),this.mergedKeyMap.location,i.location||""),this.mergedKeyMap.endValue,null!=n&&n.length?n[0].slice(-1)[0]:""))}l[this.mergedKeyMap.parseAddress]=s,"string"===this.inputDataType||"array"===this.inputDataType?this.$emit("input",o({},Object.assign(this.value,l))):"arrayObjectString"!==this.inputDataType&&"arrayObjectArray"!==this.inputDataType||this.$emit("input",u),this.$emit("change")}},clear:function(e){if(e.stopPropagation(),this.inputValue="","arrayObjectString"===this.inputDataType||"arrayObjectArray"===this.inputDataType)this.$emit("input",[]);else{var t={};this.value.hasOwnProperty(this.mergedKeyMap.detailAddress)&&(t[this.mergedKeyMap.detailAddress]=""),this.value.hasOwnProperty(this.mergedKeyMap.lng)&&(t[this.mergedKeyMap.lng]=""),this.value.hasOwnProperty(this.mergedKeyMap.lat)&&(t[this.mergedKeyMap.lat]=""),this.value.hasOwnProperty(this.mergedKeyMap.location)&&(t[this.mergedKeyMap.location]=""),this.value.hasOwnProperty(this.mergedKeyMap.endValue)&&(t[this.mergedKeyMap.endValue]=""),t[this.mergedKeyMap.parseAddress]="";var n=Object.assign(this.value,o(f(f({},this.mergedKeyMap.label,"array"===this.inputDataType||this.mergedAttrs.regionMultiple?[]:""),this.mergedKeyMap.value,"array"===this.inputDataType||this.mergedAttrs.regionMultiple?[]:""),t));this.$emit("input",o({},n))}}},render:function(){var e=this,t=arguments[0];return t("div",{on:{click:this.showDialog},class:gt({pc:!this.isPhone,mb:this.isPhone,clear:this.isShowClear,disabled:this.disabled})},[this.$scopedSlots.default?this.$scopedSlots.default({fullName:this.inputValue}):t("div",{class:"wrapper"},[this.isShowClear?t("div",{class:"icon-clear",on:{click:this.clear}},[this.isPhone?t("van-icon",{attrs:{name:"clear"}}):t("i",{class:"el-icon-circle-close"})]):null,this.isPhone?t("van-field",{attrs:{readonly:!0,clearable:!0,type:"textarea",rows:"1",autosize:!0,placeholder:this.placeholder},model:{value:e.inputValue,callback:function(t){e.inputValue=t}}}):t("el-input",{attrs:{readonly:!0,size:this.size,type:this.inputType,placeholder:this.placeholder},model:{value:e.inputValue,callback:function(t){e.inputValue=t}}})])])}},yt=F({},undefined,mt,undefined,undefined,undefined,!1,void 0,void 0,void 0);Promise.allSettled||(Promise.allSettled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return Promise.all(e.map(t?function(e){return e instanceof Promise?e.catch((function(e){return e})):e}:function(e){return e instanceof Promise?e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}})):{status:"fulfilled",value:e}}))});var vt,bt;if("undefined"!=typeof window&&window.Vue){window.$hxt_address=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.key="address_frontInit_".concat(e.key),window.$hxt(e)};try{vt=window.Vue,null!==(bt=vt.options.directives)&&void 0!==bt&&bt.loading||(vt.options.directives.loading={bind:function(e,t){}}),vt.component("".concat(x,"Address"),ft),vt.component("".concat(x,"AddressHandler"),yt)}catch(e){}window.hxLangPluginInstall&&window.hxLangPluginInstall(window.Vue,["address"],{callback:function(){}})}e.HxAddress=ft,e.HxAddressHandler=yt}));
